(()=>{var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const a=flarum.reg.get("core","forum/app");var o=t.n(a);const s=flarum.reg.get("core","common/Model");var l=t.n(s);const r=flarum.reg.get("flarum-tags","common/models/Tag");var i=t.n(r);const n=flarum.reg.get("core","common/models/Discussion");var u=t.n(n);const c=flarum.reg.get("core","forum/components/IndexPage");var d=t.n(c);const g=flarum.reg.get("core","common/components/Page");var h=t.n(g);const p=flarum.reg.get("core","common/components/Button");var f=t.n(p);const v=flarum.reg.get("core","common/Component");var b=t.n(v);const B=flarum.reg.get("core","common/components/Link");var w=t.n(B);class y extends(b()){oninit(t){super.oninit(t),this.blogCategories=app.forum.attribute("blogTags")}view(){return m("div",{className:"BlogCategories BlogSideWidget"},m("h3",null,app.translator.trans("v17development-flarum-blog.forum.categories")),this.blogCategories&&this.blogCategories.map((t=>{const e=app.store.getById("tags",t);if(!e)return null;const a=[];let o=1===this.blogCategories.length||e.slug()===m.route.param("slug");return app.store.all("tags").forEach((t=>{t.isChild()&&t.parent()===e&&(t.slug()===m.route.param("slug")&&(o=!0),a.push(this.categoryItem(t)))})),o?[this.categoryItem(e),...a]:this.categoryItem(e)})))}categoryItem(t){return m(w(),{href:app.route("blogCategory",{slug:t.slug()}),className:"BlogSideWidget-item BlogSideWidget-item-".concat(t.id()," ").concat(t.isChild()&&1==app.forum.attribute("blogCategoryHierarchy")?"BlogSideWidget-item-child":"")},m("span",{className:""===t.icon()?"BlogSideWidget-item-colored":"",style:{backgroundColor:""===t.icon()?t.color():null}},m("i",{className:t.icon()})),t.name())}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/BlogCategories",y);const N=flarum.reg.get("core","common/components/SelectDropdown");var A=t.n(N);class F extends(b()){view(){return m("div",{className:"BlogForumNav BlogSideWidget"},m("h3",null,app.translator.trans("v17development-flarum-blog.forum.forum_nav")),m("nav",{className:"IndexPage-nav sideNav"},m(A(),{buttonClassName:"Button",className:"App-titleControl"},this.navItems().toArray())))}navItems(){return d().prototype.navItems()}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/ForumNav",F);const _=flarum.reg.get("core","common/components/Tooltip");var I=t.n(_);const C=flarum.reg.get("core","common/helpers/humanTime");var k=t.n(C);const M=flarum.reg.get("core","common/helpers/icon");var S=t.n(M);const x=flarum.reg.get("core","common/utils/classList");var P=t.n(x);const L=flarum.reg.get("core","common/utils/ItemList");var T=t.n(L);class D extends(b()){titleItems(){var t,e,a,s;const{article:l}=this.attrs,r=new(T());return r.add("title",m("[",null,l.title()),100),(null!=(t=l.blogMeta())&&null!=(e=t.isPendingReview)&&e.call(t)||l.isHidden())&&r.add("hidden",S()("fas fa-eye-slash",{class:"BlogList-item-hidden"}),80),null!=(a=l.blogMeta())&&null!=(s=a.isPendingReview)&&s.call(a)&&r.add("pendingReview",m(I(),{text:o().translator.trans("v17development-flarum-blog.forum.review_article.pending_review")},S()("far fa-clock",{class:"BlogList-item-pendingReview"})),40),r}dataItems(){var t,e;const{article:a}=this.attrs,s=new(T());return s.add("createdAt",m("span",{class:"BlogList-item-details-createdAt"},S()("far fa-clock")," ",k()(a.createdAt())),100),s.add("author",m("span",{class:"BlogList-item-details-author"},S()("far fa-user")," ",(null==(t=a.user())||null==(e=t.displayName)?void 0:e.call(t))||o().translator.trans("core.lib.username.deleted_text")),80),s.add("replies",m("span",{class:"BlogList-item-details-replies"},S()("far fa-comment")," ",(a.commentCount()||1)-1),60),s}contentItems(){var t,e;const{article:a}=this.attrs,o=(null==(t=a.blogMeta())||null==(e=t.summary)?void 0:e.call(t))||"",s=new(T());return s.add("title",m("h4",null,this.titleItems().toArray()),100),o&&s.add("summary",m("p",null,o),80),s.add("data",m("div",{class:"data"},this.dataItems().toArray()),60),s}getImage(){var t,e;const{article:a,defaultImage:o}=this.attrs;return null!=(t=a.blogMeta())&&null!=(e=t.featuredImage)&&e.call(t)?"url(".concat(a.blogMeta().featuredImage(),")"):o}view(t){var e,a;const{article:s,defaultImage:l}=this.attrs,r=this.getImage(),i=null==(e=s.blogMeta())||null==(a=e.isSized)?void 0:a.call(e);return m(w(),{href:o().route("blogArticle",{id:"".concat(s.slug())}),className:P()("BlogList-item",{"BlogList-item-sized":i,"BlogList-item-default":!i},s.tags().map((t=>"BlogList-item-category-".concat(t.id()))))},m("div",{class:P()("BlogList-item-photo",{"FlarumBlog-default-image":r===l}),style:{backgroundImage:r}}),m("div",{class:"BlogList-item-content"},this.contentItems().toArray()))}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/BlogOverviewItem",D);class R extends(b()){topItems(){var t,e,a,s,l,r;const{article:i}=this.attrs,n=new(T());return n.add("tags",m("span",{class:"BlogFeatured-list-item-tags"},null==(t=i.tags())?void 0:t.map((t=>m("span",{class:"dataItem"},t.name())))),100),null!=(e=i.isSticky)&&e.call(i)&&n.add("sticky",m("span",{class:"BlogFeatured-list-item-isSticky dataItem"},S()("fas fa-thumbtack")),80),(null!=(a=i.blogMeta())&&null!=(s=a.isPendingReview)&&s.call(a)||i.isHidden())&&n.add("hidden",m("span",{class:"BlogFeatured-list-item-isHidden dataItem"},S()("fas fa-eye-slash")),60),null!=(l=i.blogMeta())&&null!=(r=l.isPendingReview)&&r.call(l)&&n.add("pendingReview",m(I(),{text:o().translator.trans("v17development-flarum-blog.forum.review_article.pending_review"),position:"bottom"},m("span",{class:"BlogFeatured-list-item-pendingReview dataItem"},S()("far fa-clock")," ",o().translator.trans("v17development-flarum-blog.forum.review_article.pending_review_title"))),40),n}dataItems(){var t;const{article:e}=this.attrs,a=new(T());return a.add("createdAt",m("span",{class:"BlogFeatured-list-item-details-createdAt"},S()("far fa-clock")," ",k()(e.createdAt())),100),a.add("author",m("span",{class:"BlogFeatured-list-item-details-author"},S()("far fa-user")," ",(null==(t=e.user())?void 0:t.displayName())||o().translator.trans("core.lib.username.deleted_text")),80),a.add("replies",m("span",{class:"BlogFeatured-list-item-details-replies"},S()("far fa-comment")," ",e.commentCount()-1),60),a}view(t){var e,a;const{article:s,defaultImage:l}=this.attrs,r=null!=(e=s.blogMeta())&&null!=(a=e.featuredImage)&&a.call(e)?"url(".concat(s.blogMeta().featuredImage(),")"):l;return m(w(),{href:o().route("blogArticle",{id:"".concat(s.slug())}),className:P()("BlogFeatured-list-item",s.tags().map((t=>"BlogFeatured-list-item-category-".concat(t.id()))),"FlarumBlog-default-image"),style:{backgroundImage:r}},m("div",{class:"BlogFeatured-list-item-top"},this.topItems().toArray()),m("div",{className:"BlogFeatured-list-item-details"},m("h4",null,s.title()),m("div",{className:"data"},this.dataItems().toArray())))}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/FeaturedBlogItem",R);class z extends(h()){oninit(t){super.oninit(t),o().setTitle(o().translator.trans("v17development-flarum-blog.forum.blog")),this.bodyClass="BlogOverviewPage",this.isLoading=!0,this.featuredPosts=[],this.posts=[],this.hasMore=null,this.isLoadingMore=!1,this.languages=o().store.all("discussion-languages"),this.currentSelectedLanguage=m.route.param("lang")?m.route.param("lang"):o().translator.formatter.locale,o().history.push("blog"),this.loadBlogOverview(),this.featuredCount=parseInt(o().forum.attribute("blogFeaturedCount")),this.showCategories=!0,this.showForumNav=!0}loadBlogOverview(){const t=o().preloadedApiDocument();t?setTimeout(this.show.bind(this,t),0):this.reloadData(),m.redraw()}reloadData(){let t="is:blog".concat(m.route.param("slug")?" tag:".concat(m.route.param("slug")):"");null!==this.languages&&this.languages.length>=1&&(t+=" language:".concat(this.currentSelectedLanguage)),o().store.find("discussions",{filter:{q:t},sort:"-createdAt"}).then(this.show.bind(this)).catch((()=>{m.redraw()}))}show(t){if(0===t.length)return this.isLoading=!1,void m.redraw();this.hasMore=t.payload.links&&t.payload.links.next?t.payload.links.next:null,this.featuredPosts=t.slice(0,this.featuredCount),this.posts=t.length>this.featuredCount?t.slice(this.featuredCount,t.length):[],this.isLoading=!1,m.redraw()}loadMore(){this.isLoadingMore=!0,o().store.find(this.hasMore.replace(o().forum.attribute("apiUrl"),"")).then((t=>{t.map((t=>this.posts.push(t))),this.hasMore=t.payload.links&&t.payload.links.next?t.payload.links.next:null})).catch((()=>{})).then((()=>{this.isLoadingMore=!1,m.redraw()}))}title(){if(!m.route.param("slug"))return m("h2",null,o().translator.trans("v17development-flarum-blog.forum.recent_posts"));const t=o().store.all("tags").filter((t=>t.slug()===m.route.param("slug")));return m("h2",null,t&&t[0]&&t[0].name(),m("small",null," ","- ",m(w(),{href:o().route("blog")},o().translator.trans("v17development-flarum-blog.forum.return_to_overview"))))}view(){const t=o().forum.attribute("blogDefaultImage")?"url(".concat(o().forum.attribute("baseUrl")+"/assets/"+o().forum.attribute("blogDefaultImage"),")"):null;let e;const a=flarum.extensions["fof-discussion-language"];return a&&a.components&&a.components.LanguageDropdown&&(e=a.components.LanguageDropdown),[1==o().forum.attribute("blogAddHero")&&d().prototype.hero(),m("div",{className:"FlarumBlogOverview"},m("div",{className:"container"},m("div",{className:"BlogFeatured"},m("div",{className:"BlogOverviewButtons"},o().forum.attribute("canWriteBlogPosts")&&m(f(),{className:"Button",onclick:()=>this.newArticle(),icon:"fas fa-pencil-alt"},o().translator.trans("v17development-flarum-blog.forum.compose.write_article")),null!==this.languages&&this.languages.length>=1&&m(e,{selected:this.currentSelectedLanguage,onclick:t=>{"string"==typeof t&&(this.currentSelectedLanguage=t,m.route.set(document.location.pathname,{lang:t}),this.reloadData())}})),this.title(),m("div",{style:{clear:"both"}}),m("div",{class:"BlogFeatured-list"},this.isLoading&&[...new Array(this.featuredCount).fill(void 0)].map((()=>m("div",{class:"BlogFeatured-list-item BlogFeatured-list-item-ghost"},m("div",{class:"BlogFeatured-list-item-details"},m("h4",null," "),m("div",{class:"data"},m("span",null,m("i",{class:"far fa-wave"}))))))),!this.isLoading&&this.featuredPosts.length>=0&&this.featuredPosts.map((e=>m(R,{article:e,defaultImage:t}))))),m("div",{className:"BlogScrubber"},m("div",{className:"BlogList"},this.isLoading&&[!1,!1,!0,!1].map((t=>m("div",{className:"BlogList-item BlogList-item-".concat(!0===t?"sized":"default"," BlogList-item-ghost")},m("div",{className:"BlogList-item-photo FlarumBlog-default-image"}),m("div",{className:"BlogList-item-content"},m("h4",null," "),m("p",null," "),m("div",{className:"data"},m("span",null,m("i",{className:"far fa-wave"}))))))),!this.isLoading&&this.posts.length>=1&&this.posts.map((e=>m(D,{article:e,defaultImage:t}))),!this.isLoading&&this.featuredPosts.length>0&&null===this.hasMore&&m("p",{className:"FlarumBlog-reached-end"},o().translator.trans("v17development-flarum-blog.forum.no_more_posts")),!this.isLoading&&0===this.featuredPosts.length&&0===this.posts.length&&m("p",{className:"FlarumBlog-reached-end"},o().translator.trans("v17development-flarum-blog.forum.category_empty")),!this.isLoading&&null!==this.hasMore&&m("div",{className:"FlarumBlog-reached-load-more"},m(f(),{className:"Button",onclick:()=>this.loadMore(),icon:"fas fa-chevron-down",loading:this.isLoadingMore},o().translator.trans("core.forum.discussion_list.load_more_button")))),m("div",{className:"Sidebar"},this.showCategories&&m(y,null),this.showForumNav&&m(F,null)))))]}newArticle(){let t=[];const e=o().store.getBy("tags","slug",m.route.param("slug"));e&&t.push(e),m.route.set(o().route("blogComposer",{tags:t.map((t=>t.id())).join(),lang:this.languages.length>0?this.currentSelectedLanguage:void 0}))}}flarum.reg.add("vadkuz-flarum2-blog","forum/pages/BlogOverview",z);const E=flarum.reg.get("core","forum/components/DiscussionPage");var O=t.n(E);const G=flarum.reg.get("core","common/extend"),H=flarum.reg.get("core","common/utils/mixin");var W=t.n(H);class j extends(W()(l(),{discussion:l().hasOne("discussion"),featuredImage:l().attribute("featuredImage"),summary:l().attribute("summary"),isFeatured:l().attribute("isFeatured"),isSized:l().attribute("isSized"),isPendingReview:l().attribute("isPendingReview")})){}flarum.reg.add("vadkuz-flarum2-blog","common/Models/BlogMeta",j);const U=flarum.reg.get("flarum-tags","forum/components/TagsPage");var q=t.n(U);function V(){(0,G.extend)(q().prototype,"view",(function(t){if(this.loading)return t;if(0==app.forum.attribute("blogHideTags"))return t;const e=app.forum.attribute("blogTags")||[],a=J(t,"TagsPage-content",!0),o=null==a?void 0:a.children[0];return a&&o?(o.children=o.children.map(((t,a)=>e.indexOf(this.tags[a].id())>=0?null:t)),t):t})),(0,G.extend)(d().prototype,"navItems",(function(t){return 0==app.forum.attribute("blogHideTags")||(app.forum.attribute("blogTags")||[]).forEach((e=>{t.remove("tag".concat(e))})),t}))}function J(t,e,a,o,s){void 0===a&&(a=!1),void 0===o&&(o=50),void 0===s&&(s=0);const l=function(t){if(Array.isArray(t))return t;const e=(null==t?void 0:t.children)||[];return Array.isArray(e)?e:[]}(t);let r=null;for(let t=0;t<l.length;t++){var i;if(((null==(i=l[t])||null==(i=i.attrs)?void 0:i.className)||"").includes(e)){r=l[t];break}}if(a&&!r&&s<o)for(let t of l){const a=J(t,e,!0,o,s+1);if(a)return a}return r}function K(){const t=app.route.discussion;app.route.discussion=(e,a)=>{let o=!1;if(("both"===app.forum.attribute("blogRedirectsEnabled")||"discussions_only"===app.forum.attribute("blogRedirectsEnabled"))&&e.tags().length>0){const t=app.forum.attribute("blogTags");e.tags().filter((e=>t.indexOf(e.id())>=0||e.parent()&&t.indexOf(e.parent().id())>=0)).length>0&&(o=!0)}return o?e.lastReadPostNumber()>1?app.route("blogArticle.near",{id:e.slug(),near:e.lastReadPostNumber()}):app.route("blogArticle",{id:e.slug()}):t(e,a)}}flarum.reg.add("vadkuz-flarum2-blog","forum/utils/extendTagOverview",V);const Q=flarum.reg.get("core","common/helpers/listItems");var X=t.n(Q);const Y=flarum.reg.get("core","common/helpers/avatar");var Z=t.n(Y);class $ extends(b()){view(){const t=this.attrs.loading?null:this.attrs.article?this.attrs.article.user():this.attrs.user;return m("div",{className:"FlarumBlog-Article-Author"},m("div",{className:"FlarumBlog-Article-Author-background ".concat(this.attrs.loading?"FlarumBlog-Author-Ghost":""),style:{backgroundColor:t&&t.color()?t.color():null}}),m("div",{className:"FlarumBlog-Article-Author-Avatar"},t?m(w(),{href:app.route("user",{username:t.username()})},Z()(t)):m("span",{className:"Avatar FlarumBlog-Author-Ghost"})),t&&m("div",{className:"FlarumBlog-Article-Author-Info"},m(w(),{href:app.route("user",{username:t.username()}),className:"FlarumBlog-Article-Author-Name"},t.displayName()),m("p",{className:"FlarumBlog-Article-Author-Bio"},t.bio&&t.bio()),m("ul",{className:"FlarumBlog-Article-Author-Extended"},X()(this.items().toArray()))),this.attrs.loading&&m("div",null,m("span",{className:"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost"}," "),m("p",{className:"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost"}," "),m("p",{className:"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost"}," "),m("p",{className:"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost"}," ")))}items(){return new(T())}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/BlogItemSidebar/BlogAuthor",$);const tt=flarum.reg.get("core","common/components/Modal");var et=t.n(tt);const at=flarum.reg.get("core","common/utils/Stream");var ot=t.n(at);class st extends(et()){oninit(t){super.oninit(t),this.article=this.attrs.article,this.name=ot()(this.article.title()||""),this.redirect=this.attrs.redirect}className(){return"Modal--small Support-Modal"}title(){return app.translator.trans("v17development-flarum-blog.forum.tools.rename_article")}content(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))}fields(){const t=new(T());return t.add("name",m("div",{className:"Form-group"},m("label",null,app.translator.trans("v17development-flarum-blog.forum.article.title"),":"),m("input",{className:"FormControl",placeholder:app.translator.trans("v17development-flarum-blog.forum.article.title"),bidi:this.name})),50),t.add("submit",m("div",{className:"Form-group"},f().component({type:"submit",className:"Button Button--primary SupportModal-save",loading:this.loading},app.translator.trans("core.forum.composer_edit.submit_button"))),-10),t}submitData(){return{title:this.name()}}onsubmit(t){if(t.preventDefault(),this.loading=!0,this.attrs.onChange)return this.attrs.onChange(this.name()),void this.hide();this.article.save({title:this.name()}).then((()=>{if(this.hide(),this.redirect){const t="/blog/".concat(this.article.slug());m.route.set(t,!0),window.history.replaceState(null,document.title,t)}}),(t=>{this.loading=!1,this.handleErrors(t)}))}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/Modals/RenameArticleModal",st);const lt=flarum.reg.get("flarum-tags","forum/components/TagDiscussionModal");var rt=t.n(lt);const it=flarum.reg.get("core","common/components/Switch");var nt=t.n(it);flarum.reg.add("vadkuz-flarum2-blog","forum/utils/selectFiles",(function(t,e){return new Promise((a=>{let o=document.createElement("input");o.type="file",o.multiple=e,o.accept=t,o.onchange=t=>{let s=Array.from(o.files||[]);a(e?s:s[0])},o.click()}))}));class mt extends(et()){oninit(t){super.oninit(t),this.attrs.article?this.meta=this.attrs.article&&this.attrs.article.blogMeta()?this.attrs.article.blogMeta():o().store.createRecord("blogMeta"):this.meta=this.attrs.meta?this.attrs.meta:o().store.createRecord("blogMeta"),this.isNew=!this.meta.exists,this.summary=ot()(this.meta.summary()||""),this.featuredImage=ot()(this.meta.featuredImage()||""),this.isFeatured=ot()(this.meta.isFeatured()||!1),this.isSized=ot()(this.meta.isSized()||!1),this.isPendingReview=ot()(this.meta.isPendingReview()||!1)}className(){return"Modal--small Support-Modal"}title(){return o().translator.trans("v17development-flarum-blog.forum.article_settings.title")}content(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))}fields(){const t=new(T());t.add("summary",m("div",{className:"Form-group"},m("label",null,o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.summary.title"),":"),m("textarea",{className:"FormControl",style:{maxWidth:"100%",minWidth:"100%",width:"100%",minHeight:"120px"},bidi:this.summary,placeholder:o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.summary.placeholder")}),m("small",null,o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.summary.helper_text"))),30);let e=null;if("fof-upload"in flarum.extensions&&o().forum.attribute("fof-upload.canUpload")){const t=flarum.extensions["fof-upload"],a=t&&t.components?t.components.Uploader:null,s=t&&t.components?t.components.FileManagerModal:null;if(a&&s){const t=new a;e=m(f(),{class:"Button Button--icon",onclick:async()=>{o().modal.show(s,{uploader:t,onSelect:t=>{const e=o().store.getById("files",t[0]);this.featuredImage(e.url())}},!0)},icon:"fas fa-cloud-upload-alt"})}}return t.add("image",m("div",{className:"Form-group V17Blog-ArticleImage"},m("label",null,o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.image.title"),":"),m("div",{"data-upload-enabled":!!e},m("input",{type:"text",className:"FormControl",bidi:this.featuredImage,placeholder:"https://"}),e),m("small",null,o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.image.helper_text")),""!==this.featuredImage()&&m("img",{src:this.featuredImage(),alt:"Article image",title:o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.image.title"),style:{width:"100%",marginTop:"15px"}})),30),t.add("sized",m("div",{className:"Form-group"},nt().component({state:1==this.isSized(),onchange:t=>{this.isSized(t)}},[m("b",null,o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.highlight.title")),m("div",{className:"helpText",style:{fontWeight:500}},o().translator.trans("v17development-flarum-blog.forum.article_settings.fields.highlight.helper_text"))])),-10),t.add("submit",m("div",{className:"Form-group"},f().component({type:"submit",className:"Button Button--primary SupportModal-save",loading:this.loading},o().translator.trans("core.forum.composer_edit.submit_button"))),-10),t}submitData(){return{summary:this.summary(),featuredImage:this.featuredImage(),isFeatured:this.isFeatured(),isSized:this.isSized(),isPendingReview:this.isPendingReview(),relationships:this.isNew&&!this.attrs.isComposer?{discussion:this.attrs.article}:null}}onsubmit(t){if(t.preventDefault(),this.attrs.onsubmit)return this.meta.pushData({attributes:this.submitData()}),this.attrs.onsubmit(this.meta),void this.hide();this.loading=!0,this.meta.save(this.submitData()).then((()=>{this.attrs.article&&this.attrs.article.pushData({relationships:{blogMeta:this.meta}}),this.hide(),m.redraw()}),(t=>{this.loading=!1,this.handleErrors(t)}))}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/Modals/BlogPostSettingsModal",mt);const ut=flarum.reg.get("core","forum/components/ComposerBody");var ct=t.n(ut);const dt=flarum.reg.get("core","common/components/TextEditor");var gt=t.n(dt);class ht extends(b()){view(){return m("div",null)}oncreate(t){super.oncreate(t),s9e.TextFormatter.preview(t.attrs.content||"",t.dom)}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/Composer/ComposerPreview",ht);class pt extends(ct()){oninit(t){super.oninit(t),this.previewContent=!1}view(){const t=this.composer.fields.content()&&""!==this.composer.fields.content(),e=this.loading||this.attrs.disabled;return m("div",{className:"Flarum-Blog-Composer ".concat(e?"Flarum-Blog-Composer-Loading":"")},m("div",{className:"Flarum-Blog-Composer-tabs"},m(f(),{className:!this.previewContent&&"AricleComposerButtonSelected",onclick:()=>this.previewContent=!1},o().translator.trans("v17development-flarum-blog.forum.composer.write")),m(f(),{className:this.previewContent&&"AricleComposerButtonSelected",onclick:()=>this.previewContent=!0},o().translator.trans("v17development-flarum-blog.forum.composer.view"))),m("div",{className:"Composer Flarum-Blog-Composer-body ".concat(this.previewContent?"Flarum-Blog-Composer-HideEditor":"")},this.previewContent&&m("div",{className:"Flarum-Blog-Composer-preview"},!t&&o().translator.trans("v17development-flarum-blog.forum.composer.nothing_to_preview"),m(ht,{content:this.composer.fields.content()})),gt().component({submitLabel:this.attrs.submitLabel||o().translator.trans("core.forum.composer_edit.submit_button"),placeholder:this.attrs.placeholder,disabled:e,composer:this.composer,preview:this.jumpToPreview&&this.jumpToPreview.bind(this),onchange:this.composer.fields.content,onsubmit:this.onsubmit.bind(this),value:this.composer.fields.content()})))}onsubmit(){this.attrs.onsubmit&&this.attrs.onsubmit()}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/Composer/Composer",pt);class ft extends(h()){oninit(t){if(super.oninit(t),o().setTitle(o().translator.trans("v17development-flarum-blog.forum.blog")),o().forum.attribute("canWriteBlogPosts")){if(o().history.push("blogComposer"),this.languages=o().store.all("discussion-languages")||[],this.bodyClass="BlogItemPage BlogItemPage--composer",this.articleLanguage=ot()(m.route.param("lang")?m.route.param("lang"):o().translator.locale),this.article=o().store.createRecord("discussions"),this.blogMeta=null,this.tags=[],m.route.param().tags){const t=Array.isArray(m.route.param().tags)?m.route.param().tags:m.route.param().tags.split(",");m.route.param().tags.length>0&&t.forEach((t=>{const e=o().store.getById("tags",t);e&&this.tags.push(e)}))}this.isSaving=!1}else m.route.set(o().route("blog"))}openTagsModal(t){void 0===t&&(t=null),t&&t.preventDefault(),this.isSaving||o().modal.show(rt(),{selectedTags:this.tags,onsubmit:t=>{this.tags=t}})}openNameArticleModal(t){void 0===t&&(t=null),t&&t.preventDefault(),this.isSaving||o().modal.show(st,{article:this.article,onChange:t=>{this.article.pushData({attributes:{title:t}})}})}openBlogSettings(t){t.preventDefault(),this.isSaving||o().modal.show(mt,{meta:this.blogMeta,onsubmit:t=>this.blogMeta=t})}view(){return m("div",{className:"FlarumBlogItem"},m("div",{className:"container"},this.pageItems().toArray()))}pageItems(){const t=new(T());return t.add("toolButtons",m("div",{className:"FlarumBlog-ToolButtons"},m(w(),{href:o().route("blog"),className:"Button",loading:this.isSaving,icon:"fas fa-angle-left"},m("i",{class:"icon fas fa-angle-left Button-icon"}),m("span",{class:"Button-label"},o().translator.trans("v17development-flarum-blog.forum.return_to_overview")))),100),t.add("article",m("div",{className:"FlarumBlog-Article"},this.articleWrapperItems().toArray()),90),t}articleWrapperItems(){const t=new(T());return t.add("container",m("div",{className:"FlarumBlog-Article-Container"},this.articleItems().toArray()),100),t.add("sidebar",m("div",{className:"FlarumBlog-Article-Sidebar"},m($,{user:o().session.user})),90),t}articleItems(){const t=new(T()),e=o().forum.attribute("blogDefaultImage")?"url(".concat(o().forum.attribute("baseUrl")+"/assets/"+o().forum.attribute("blogDefaultImage"),")"):null,a=this.blogMeta&&this.blogMeta.featuredImage()?"url(".concat(this.blogMeta.featuredImage(),")"):e;let s;const l=flarum.extensions["fof-discussion-language"];return l&&l.components&&l.components.LanguageDropdown&&(s=l.components.LanguageDropdown),t.add("content",m("div",{className:"FlarumBlog-Article-Content"},m("div",{className:"FlarumBlog-Article-Image FlarumBlog-default-image",style:{backgroundImage:a,cursor:"pointer"},onclick:t=>this.openBlogSettings(t)}),m("div",{className:"FlarumBlog-Article-Content-Edit-Button"},m("div",{className:0===this.languages.length?"FlarumBlog-Article-Content-Edit-Dropdown":"FlarumBlog-Article-Content-EditButtons"},null!==this.languages&&this.languages.length>=1&&m(s,{selected:this.articleLanguage(),onclick:t=>{"string"==typeof t&&this.articleLanguage(t)}}),m(f(),{className:"Button",onclick:t=>this.openBlogSettings(t),icon:"fas fa-pencil-alt",loading:this.isSaving},o().translator.trans("v17development-flarum-blog.forum.composer.update_settings")))),m("div",{className:"FlarumBlog-Article-Categories"},this.tags.map((t=>m("button",{class:"Button Button--text",onclick:t=>this.openTagsModal(t)},t.name()))),m("button",{class:"Button Button--text",onclick:t=>this.openTagsModal(t)},0===this.tags.length?o().translator.trans("v17development-flarum-blog.forum.composer.select_category"):o().translator.trans("v17development-flarum-blog.forum.composer.edit_categories")," ",m("i",{className:"fas fa-edit"}))),m("div",{className:"FlarumBlog-Article-Post"},m("h1",{onclick:()=>this.openNameArticleModal(),className:"FlarumBlog-Article-Title",style:{cursor:"pointer"}},this.article&&this.article.title()&&""!==this.article.title()?this.article.title():o().translator.trans("v17development-flarum-blog.forum.composer.no_title"),m("button",{class:"Button Button--text",onclick:t=>t.preventDefault()},m("i",{className:"fas fa-edit"}))),m("div",{className:"Post-body"},m(pt,{composer:o().composer,originalContent:"",submitLabel:o().translator.trans("v17development-flarum-blog.forum.composer.post_article"),placeholder:o().translator.trans("v17development-flarum-blog.forum.composer.enter_message_here"),onsubmit:()=>this.create(),disabled:this.isSaving})))),100),t.add("commentsPlaceholder",m("div",{className:"FlarumBlog-Article-Comments"},m("h4",null,o().translator.trans("v17development-flarum-blog.forum.comment_section.comments")," (0)"),m("div",{className:"Post-body"},m("blockquote",{class:"uncited"},m("div",null,m("span",{className:"fas fa-ban",style:{marginRight:"5px"}})," ",o().translator.trans("v17development-flarum-blog.forum.composer.comment_section"))))),90),t}create(){const t=o().forum.attribute("blogTags")||[];if(0===this.tags.length)return void this.openTagsModal();if(!this.article.title()||""===this.article.title())return void this.openNameArticleModal();if(0===this.tags.filter((e=>t.indexOf(e.id())>=0)).length)return void alert(o().translator.trans("v17development-flarum-blog.forum.composer.no_blog_tags_selected"));if(!(null!==this.blogMeta&&(this.blogMeta.featuredImage()||o().forum.attribute("blogDefaultImage"))&&this.blogMeta.summary()||confirm(o().translator.trans("v17development-flarum-blog.forum.composer.post_without_blog_info"))))return;let e={tags:this.tags};this.languages.length>0&&(e.language=o().store.getBy("discussion-languages","code",this.articleLanguage()));const a={title:this.article.title(),content:o().composer.fields.content(),relationships:e,blogMeta:null!==this.blogMeta?{featuredImage:this.blogMeta.featuredImage(),summary:this.blogMeta.summary(),isSized:this.blogMeta.isSized()}:null};this.isSaving=!0,this.article.save(a).then((t=>{setTimeout((()=>{m.route.set(o().route("blogArticle",{id:"".concat(t.slug())}))}),500)})).catch((()=>{this.isSaving=!1,m.redraw()}))}}flarum.reg.add("vadkuz-flarum2-blog","forum/pages/BlogComposer",ft);const vt=flarum.reg.get("core","common/components/LinkButton");var bt=t.n(vt);function Bt(){(0,G.extend)(d().prototype,"navItems",(function(t){return app.forum.attribute("blogAddSidebarNav")&&"0"!==app.forum.attribute("blogAddSidebarNav")&&t.add("blog",m(bt(),{icon:"fas fa-comment",href:app.route("blog")},app.translator.trans("v17development-flarum-blog.forum.blog")),15),t}))}flarum.reg.add("vadkuz-flarum2-blog","forum/utils/addSidebarNav",Bt);const wt=flarum.reg.get("core","forum/components/CommentPost");var yt=t.n(wt);const Nt=flarum.reg.get("core","forum/components/PostStream");var At=t.n(Nt);const Ft=flarum.reg.get("core","forum/states/PostStreamState");var _t=t.n(Ft);const It=flarum.reg.get("core","forum/utils/DiscussionControls");var Ct=t.n(It);const kt=flarum.reg.get("core","common/components/Alert");var Mt=t.n(kt);const St=flarum.reg.get("core","common/components/Dropdown");var xt=t.n(St);const Pt=flarum.reg.get("core","forum/components/EditPostComposer");var Lt=t.n(Pt);const Tt=flarum.reg.get("core","common/utils/extractText");var Dt=t.n(Tt);class Rt extends(b()){init(){this.loadedPost=!1}manageArticleButtons(){const t=this.attrs.article,e=new(T()),a=flarum.extensions["fof-discussion-language"]&&void 0!==flarum.extensions["fof-discussion-language"].components?flarum.extensions["fof-discussion-language"].components.LanguageDiscussionModal:null;t.canRename()&&e.add("rename",f().component({className:"Button",onclick:()=>o().modal.show(st,{article:t}),icon:"fas fa-pencil-alt"},o().translator.trans("v17development-flarum-blog.forum.tools.rename_article")),100);const s=t.firstPost();e.add("edit",f().component({className:"Button",disabled:!s||!s.canEdit(),onclick:()=>{o().composer.load(Lt(),{post:s}),o().composer.show()},icon:"fas fa-edit"},o().translator.trans("v17development-flarum-blog.forum.tools.edit_article")),90),e.add("articleSettings",f().component({className:"Button",onclick:()=>o().modal.show(mt,{article:t}),icon:"fas fa-cogs"},o().translator.trans("v17development-flarum-blog.forum.tools.article_settings")),80),t.canTag()&&e.add("tag",f().component({className:"Button",onclick:()=>o().modal.show(rt(),{discussion:t}),icon:"fas fa-tag"},o().translator.trans("v17development-flarum-blog.forum.tools.update_category")),70);const l=flarum.extensions["v17development-seo"],r=l&&l.components?l.components.MetaSeoModal:null;return t.blogMeta()&&r&&o().forum.attribute("canConfigureSeo")&&e.add("seo",f().component({className:"Button",onclick:()=>o().modal.show(r,{objectType:"blogs",objectId:t.blogMeta().id()}),icon:"fas fa-search"},o().translator.trans("v17development-flarum-seo.forum.controls.configure_seo")),70),t.blogMeta()&&t.blogMeta().isPendingReview()&&(e.add("separator1",m("li",{className:"Dropdown-separator"}),65),e.add("approve",f().component({className:"Button",disabled:!o().forum.attribute("canApproveBlogPosts"),onclick:()=>{t.blogMeta().save({isPendingReview:!1}).then((()=>{o().alerts.show(Mt(),{type:"success"},o().translator.trans("v17development-flarum-blog.forum.review_article.approve_article_approved"))}),(t=>{this.loading=!1,this.handleErrors(t)}))},icon:"fas fa-thumbs-up"},o().translator.trans("v17development-flarum-blog.forum.review_article.approve_article")),60)),t.canChangeLanguage&&t.canChangeLanguage()&&a&&e.add("lang",f().component({icon:"fas fa-globe",onclick:()=>o().modal.show(a,{discussion:t})},o().translator.trans("fof-discussion-language.forum.discussion_controls.change_language_button")),50),e.add("separator2",m("li",{className:"Dropdown-separator"}),40),t.canLock()&&e.add("lock",f().component({className:"Button",onclick:Ct().lockAction.bind(t),icon:"fas ".concat(t.isLocked()?"fa-comments":"fa-comment-slash")},t.isLocked()?o().translator.trans("v17development-flarum-blog.forum.tools.enable_comments"):o().translator.trans("v17development-flarum-blog.forum.tools.disable_comments")),30),t.canHide()&&(t.isHidden()?(e.add("recover",f().component({className:"Button",onclick:Ct().restoreAction.bind(t),icon:"fas fa-eye"},o().translator.trans("v17development-flarum-blog.forum.tools.recover_article")),20),t.canDelete()&&e.add("delete",f().component({className:"Button",onclick:()=>{if(confirm(Dt()(o().translator.trans("core.forum.discussion_controls.delete_confirmation"))))return"blogArticle"===o().history.getCurrent().name&&(o().previous?o().history.back():m.route.set(o().route("blog"))),t.delete().then((()=>{m.redraw()}))},icon:"far fa-trash-alt"},o().translator.trans("v17development-flarum-blog.forum.tools.delete_forever")),10)):e.add("hide",f().component({className:"Button",onclick:Ct().hideAction.bind(t),icon:"fas fa-eye-slash"},o().translator.trans("v17development-flarum-blog.forum.tools.hide_article")),0)),e}view(){const t=this.attrs.article.firstPost();return m("div",{className:"FlarumBlog-Article-Content-Edit-Button"},m("div",{className:"FlarumBlog-Article-Content-Edit-Dropdown"},xt().component({icon:"fas fa-cog",label:"Manage",buttonClassName:"Button",menuClassName:"Dropdown-menu--right",onshow:()=>{!t||t.canEdit()||this.loadedPost||(this.loadedPost=!0,m.redraw())}},this.manageArticleButtons().toArray())))}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/BlogPostController",Rt);class zt extends(b()){view(){return m("div",{className:"FlarumBlog-Article-Sidebar"},m("ul",null,X()(this.items().toArray())))}items(){const t=new(T());return t.add("author",$.component(this.attrs),0),t.add("categories",y.component(this.attrs),0),t.add("nav",F.component(this.attrs),0),t}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/BlogItemSidebar/BlogItemSidebar",zt);const Et=flarum.reg.get("core","common/helpers/fullTime");var Ot=t.n(Et);class Gt extends(b()){view(){const t=this.attrs.discussion.subscription(),e=app.session.user.preferences().notify_newPost_email,a=Dt()(app.translator.trans(e?"flarum-subscriptions.forum.sub_controls.notify_email_tooltip":"flarum-subscriptions.forum.sub_controls.notify_alert_tooltip"));let o=app.translator.trans("flarum-subscriptions.forum.sub_controls.not_following_button"),s="far fa-star";return"follow"===t&&(o=app.translator.trans("flarum-subscriptions.forum.sub_controls.following_button"),s="fas fa-star"),m(I(),{text:a,position:"bottom"},m(f(),{className:"Button BlogArticleSubscription SubscriptionMenu-button--".concat(t),icon:s,onclick:this.saveSubscription.bind(this,this.attrs.discussion,-1!==["follow","ignore"].indexOf(t)?null:"follow")},o))}saveSubscription(t,e){t.save({subscription:e})}}flarum.reg.add("vadkuz-flarum2-blog","forum/components/ArticleSubscription",Gt);class Ht extends(h()){oninit(t){super.oninit(t),o().setTitle(o().translator.trans("v17development-flarum-blog.forum.blog")),o().history.push("blogArticle"),this.bodyClass="BlogItemPage",this.near=m.route.param("near")||0,this.loading=!0,this.found=!1,this.article=null,this.loadBlogItem()}loadBlogItem(){const t=o().preloadedApiDocument();t?setTimeout(this.show.bind(this,t),0):o().store.find("discussions",m.route.param("id").split("-")[0]).then(this.show.bind(this)).catch((()=>{m.redraw()})),m.redraw()}show(t){this.article=t,o().setTitle("".concat(t.title()," - ").concat(o().translator.trans("v17development-flarum-blog.forum.blog"))),this.loading=!1;let e=[];if(t.payload&&t.payload.included){const a=t.id();e=t.payload.included.filter((t=>"posts"===t.type&&t.relationships&&t.relationships.discussion&&t.relationships.discussion.data.id===a)).map((t=>o().store.getById("posts",t.id))).sort(((t,e)=>t.id()-e.id())).slice(0,20)}this.stream=new(_t())(t,e),this.near&&this.stream.goToNumber(this.near||0,!0).then((()=>{o().current.set("discussion",t),o().current.set("stream",this.stream)})),o().session.user&&!t.lastReadPostNumber()&&t.save({lastReadPostNumber:1}),m.redraw()}postItems(){var t,e,a,s;let l=null;var r,i;!this.loading&&this.article&&(l=null==(r=this.article)||null==(i=r.firstPost)?void 0:i.call(r));const n=new(T());var u,c,d;return n.add("title",m("h1",{className:P()("FlarumBlog-Article-Title",{"FlarumBlog-Article-GhostTitle":this.loading})},(null==this||null==(t=this.article)||null==(e=t.title)?void 0:e.call(t))||"Ghost title",(null==(a=this.article)||null==(s=a.isHidden)?void 0:s.call(a))&&"(".concat(o().translator.trans("v17development-flarum-blog.forum.hidden"),")")),100),n.add("publishDate",m("div",{className:P()("FlarumBlog-Article-PublishDate",{"FlarumBlog-Article-GhostPublishDate":this.loading})},this.article?Ot()(this.article.createdAt()):m("span",null," ")),80),this.loading&&n.add("skeleton",[0,1,2].map((()=>m("div",null,m("p",{className:"FlarumBlog-Article-GhostParagraph"}," "),m("p",{className:"FlarumBlog-Article-GhostParagraph"}," "),m("p",{className:"FlarumBlog-Article-GhostParagraph"}," "),m("p",null," ")))),60),this.loading||(null!=(u=(c=this.article).blogMeta)&&null!=(u=u.call(c))&&null!=(d=u.isPendingReview)&&d.call(u)&&n.add("review",m("div",{className:"Post-body"},m("blockquote",{class:"uncited",style:{fontSize:"16px"}},m("div",null,S()("far fa-clock",{style:{marginRight:"5px"}})," ",o().translator.trans("v17development-flarum-blog.forum.review_article.pending_review")))),60),l&&n.add("post",m(yt(),{post:l}),40)),n}contentItems(){var t,e,a,s,l,r,i,n,u,c,d,g,h;const p=o().forum.attribute("blogDefaultImage")?"url(".concat(o().forum.attribute("baseUrl"),"/assets/").concat(o().forum.attribute("blogDefaultImage"),")"):null,f=null!=(t=this.article)&&null!=(t=t.blogMeta())&&null!=(e=t.featuredImage)&&e.call(t)?"url(".concat(this.article.blogMeta().featuredImage(),")"):p,v=new(T());return v.add("image",m("div",{className:P()("FlarumBlog-Article-Image FlarumBlog-default-image",{"FlarumBlog-Article-GhostImage":this.loading}),style:{backgroundImage:f,opacity:null!=(a=this.article)&&null!=(s=a.isHidden)&&s.call(a)?.4:null}}),100),this.article&&(null!=(l=o().session.user)&&null!=(r=l.canEdit)&&r.call(l)||null!=(i=this.article)&&null!=(n=i.canRename)&&n.call(i)||null!=(u=this.article)&&null!=(c=u.posts)&&null!=(c=c.call(u))&&null!=(c=c[0])&&null!=(d=c.canEdit)&&d.call(c))&&v.add("editArticle",m(Rt,{article:this.article}),80),v.add("categories",m("div",{className:"FlarumBlog-Article-Categories"},!this.loading&&(null==(g=this.article)||null==(h=g.tags)||null==(h=h.call(g))?void 0:h.map((t=>m(w(),{href:o().route("blogCategory",{slug:t.slug()})},t.name())))),this.loading&&[0,1].map((()=>m("span",{className:"FlarumBlog-Article-GhostCategory"},"Category")))),60),v.add("post",m("div",{className:"FlarumBlog-Article-Post"},this.postItems().toArray()),40),v}articleItems(){var t,e,a,s;const l=new(T());var r,i;return l.add("content",m("div",{className:"FlarumBlog-Article-Content"},this.contentItems().toArray()),100),null!=this&&null!=(t=this.article)&&null!=(e=t.isLocked)&&e.call(t)&&1===(null==this||null==(a=this.article)||null==(s=a.commentCount)?void 0:s.call(a))||l.add("comments",m("div",{className:"FlarumBlog-Article-Comments"},!this.loading&&o().session.user&&this.article.subscription&&(!this.article.isLocked||this.article.isLocked&&!this.article.isLocked())&&m(Gt,{discussion:this.article}),m("h4",null,o().translator.trans("v17development-flarum-blog.forum.comment_section.comments")," (",this.article?this.article.commentCount()-1:0,")"),!this.loading&&(null==(r=this.article)||null==(i=r.isLocked)?void 0:i.call(r))&&m("div",{className:"Post-body"},m("blockquote",{class:"uncited"},m("div",null,m("span",{className:"far fa-lock",style:{marginRight:"5px"}})," ",o().translator.trans("v17development-flarum-blog.forum.comment_section.locked")))),!this.loading&&this.article&&At().component({discussion:this.article,stream:this.stream,onPositionChange:this.positionChanged.bind(this)})),75),l}view(){return[1==o().forum.attribute("blogAddHero")&&d().prototype.hero(),m("div",{className:"FlarumBlogItem"},m("div",{className:"container"},m("div",{className:"FlarumBlog-ToolButtons"},m(w(),{href:o().route("blog"),className:"Button",onclick:t=>{o().previous.matches(z)&&(t.preventDefault(),history.back())}},m("i",{class:"icon fas fa-angle-left Button-icon"}),m("span",{class:"Button-label"},o().translator.trans("v17development-flarum-blog.forum.return_to_overview")))),m("div",{className:"FlarumBlog-Article"},m("div",{className:"FlarumBlog-Article-Container"},this.articleItems().toArray()),m(zt,{article:this.article,loading:this.loading}))))]}positionChanged(t,e){const a=this.article;o().session.user&&e>(a.lastReadPostNumber()||0)&&(a.save({lastReadPostNumber:e}),m.redraw())}}flarum.reg.add("vadkuz-flarum2-blog","forum/pages/BlogItem",Ht),o().initializers.add("vadkuz-flarum2-blog",(t=>{t.routes.blog={path:"/blog",component:z},t.routes.blogCategory={path:"/blog/category/:slug",component:z},t.routes.blogComposer={path:"/blog/compose",component:ft},t.routes.blogArticle={path:"/blog/:id",component:Ht},t.routes["blogArticle.near"]={path:"/blog/:id/:near",component:Ht},t.store.models.blogMeta=j,u().prototype.blogMeta=l().hasOne("blogMeta"),i().prototype.isBlog=l().attribute("isBlog"),(0,G.extend)(d().prototype,"oncreate",(function(){const t=this.currentTag(),e="both"===o().forum.attribute("blogRedirectsEnabled")||"tags_only"===o().forum.attribute("blogRedirectsEnabled");if(t&&e){const e=o().forum.attribute("blogTags");(e.indexOf(t.id())>=0||t.parent()&&e.indexOf(t.parent().id())>=0)&&m.route.set(o().route("blog"))}})),(0,G.override)(O().prototype,"show",(function(t,e){if(("both"===o().forum.attribute("blogRedirectsEnabled")||"discussions_only"===o().forum.attribute("blogRedirectsEnabled"))&&e&&e&&e.tags().length>0){const t=o().forum.attribute("blogTags");if(e.tags().filter((e=>t.indexOf(e.id())>=0||e.parent()&&t.indexOf(e.parent().id())>=0)).length>0){const t=o().route("blogArticle",{id:e.slug()});return m.route.set(t,null,{replace:!0}),null}}return t(e)})),V(),K(),Bt()}),-1e5)})(),module.exports=e})();
//# sourceMappingURL=forum.js.map