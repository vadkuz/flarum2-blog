{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@vadkuz/flarum2-blog/webpack/bootstrap","webpack://@vadkuz/flarum2-blog/webpack/runtime/compat get default export","webpack://@vadkuz/flarum2-blog/webpack/runtime/define property getters","webpack://@vadkuz/flarum2-blog/webpack/runtime/hasOwnProperty shorthand","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/BasicsPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/PermissionGrid')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/utils/saveSettings')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/FieldSet')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/UploadImageButton')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/FormModal')\"","webpack://@vadkuz/flarum2-blog/./src/admin/components/Modals/SelectCategoriesModal.js","webpack://@vadkuz/flarum2-blog/./src/admin/pages/BlogSettings.js","webpack://@vadkuz/flarum2-blog/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/BasicsPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/PermissionGrid');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/utils/saveSettings');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FieldSet');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/UploadImageButton');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FormModal');","import app from 'flarum/admin/app';\nimport FormModal from 'flarum/common/components/FormModal';\nimport Button from 'flarum/common/components/Button';\nimport Alert from 'flarum/common/components/Alert';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Switch from 'flarum/common/components/Switch';\nexport default class SelectCategoriesModal extends FormModal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.blogCategoriesOriginal = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|') : [];\n    this.blogCategories = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|') : [];\n    this.hasChanges = false;\n  }\n  title() {\n    return 'Select blog categories';\n  }\n  className() {\n    return 'Modal modal-dialog FlarumBlog-TagsModal';\n  }\n  content() {\n    return m(\"div\", null, m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"p\", null, \"Please select one or more tags that are considered blog tags.\", ' ', m(\"a\", {\n      href: app.forum.attribute('baseUrl') + '/blog',\n      target: '_blank'\n    }, \"Visit your blog.\")), m(\"table\", {\n      className: 'FlarumBlog-TagsTable'\n    }, m(\"thead\", null, m(\"tr\", null, m(\"th\", {\n      width: \"35\"\n    }), m(\"th\", null, \"Tag name\"), m(\"th\", {\n      width: \"50\"\n    }))), m(\"tbody\", null, app.store.all('tags').length === 0 && m(\"tr\", null, m(\"td\", {\n      colSpan: \"3\"\n    }, \"You currently have no tags.\")), app.store.all('tags').map(obj => {\n      // Skip all tags who aren't main categories\n      if (obj.parent()) {\n        return;\n      }\n\n      // Toggle tag\n      const toggleTag = () => {\n        const currentIndex = this.blogCategories.indexOf(obj.id());\n        this.hasChanges = true;\n\n        // Remove tag\n        if (currentIndex >= 0) {\n          this.blogCategories.splice(currentIndex, 1);\n        } else {\n          // Add tag\n          this.blogCategories.push(obj.id());\n        }\n      };\n      return m(\"tr\", null, m(\"td\", null, m(\"i\", {\n        className: obj.icon()\n      })), m(\"td\", {\n        onclick: toggleTag\n      }, obj.name()), m(\"td\", null, m(Switch, {\n        state: this.blogCategories.indexOf(obj.id()) >= 0,\n        onchange: toggleTag\n      })));\n    })))), m(\"div\", {\n      style: \"padding: 25px 30px; text-align: center;\"\n    }, m(Button, {\n      type: \"submit\",\n      className: \"Button Button--primary\",\n      loading: this.loading,\n      disabled: this.loading\n    }, this.hasChanges ? 'Save changes' : 'Close')));\n  }\n\n  // Close or save setting\n  onsubmit(e) {\n    e.preventDefault();\n    if (!this.hasChanges) {\n      this.hide();\n      return;\n    }\n    this.loading = true;\n\n    // Validate tags and prevent ghost tags (deleted tags)\n    let validBlogTags = [];\n    this.blogCategories.map(tagId => {\n      if (app.store.getById('tags', tagId)) {\n        validBlogTags.push(tagId);\n      }\n    });\n    saveSettings({\n      blog_tags: validBlogTags.join('|')\n    }).then(() => {\n      app.alerts.show(Alert, {\n        type: 'success'\n      }, app.translator.trans('core.admin.settings.saved_message'));\n      this.hide();\n    }).catch(() => {\n      app.alerts.show(Alert, {\n        type: 'error'\n      }, app.translator.trans('core.lib.error.generic_message'));\n    }).then(() => {\n      this.loaded();\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'admin/components/Modals/SelectCategoriesModal', SelectCategoriesModal);","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport Switch from 'flarum/common/components/Switch';\nimport UploadImageButton from 'flarum/common/components/UploadImageButton';\nimport SelectCategoriesModal from '../components/Modals/SelectCategoriesModal';\nexport default class BlogSettings extends ExtensionPage {\n  oninit(attrs) {\n    var _app$data$settings$bl, _app$data$settings$bl2, _app$data$settings$bl3, _app$data$settings$bl4, _app$data$settings$bl5, _app$data$settings$bl6, _app$data$settings$bl7, _app$data$settings$bl8, _app$data$settings$bl9, _app$data$settings$bl0;\n    super.oninit(attrs);\n\n    // Form\n    this.hasChanges = false;\n    this.isSaving = false;\n\n    // Settings\n    this.redirectsEnabled = (_app$data$settings$bl = app.data.settings.blog_redirects_enabled) != null ? _app$data$settings$bl : 'both';\n    this.hideTagsInList = (_app$data$settings$bl2 = app.data.settings.blog_hide_tags) != null ? _app$data$settings$bl2 : true;\n    this.allowComments = (_app$data$settings$bl3 = app.data.settings.blog_allow_comments) != null ? _app$data$settings$bl3 : true;\n    this.hideOnDiscussionList = (_app$data$settings$bl4 = app.data.settings.blog_filter_discussion_list) != null ? _app$data$settings$bl4 : false;\n    this.requiresReviewOnPost = (_app$data$settings$bl5 = app.data.settings.blog_requires_review) != null ? _app$data$settings$bl5 : false;\n    this.addCategoryHierarchy = (_app$data$settings$bl6 = app.data.settings.blog_category_hierarchy) != null ? _app$data$settings$bl6 : true;\n    this.addSidebarNav = (_app$data$settings$bl7 = app.data.settings.blog_add_sidebar_nav) != null ? _app$data$settings$bl7 : true;\n    this.featuredCount = (_app$data$settings$bl8 = app.data.settings.blog_featured_count) != null ? _app$data$settings$bl8 : 3;\n    this.blogAddHero = (_app$data$settings$bl9 = app.data.settings.blog_add_hero) != null ? _app$data$settings$bl9 : true;\n    const defaultImagePath = (_app$data$settings$bl0 = app.data.settings.blog_default_image_path) != null ? _app$data$settings$bl0 : null;\n    app.forum.data.attributes.blog_default_imageUrl = defaultImagePath ? \"\".concat(app.forum.attribute('baseUrl'), \"/assets/\").concat(defaultImagePath) : null;\n  }\n  content() {\n    const blogCategoriesCount = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|').length : 0;\n    return m(\"div\", {\n      className: \"BasicsPage FlarumBlog\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: 'FlarumBlog-SelectCategories'\n    }, blogCategoriesCount === 0 ? app.translator.trans('vadkuz-flarum2-blog.admin.settings.no_categories_selected') : app.translator.trans('vadkuz-flarum2-blog.admin.settings.selected_category_count', {\n      count: blogCategoriesCount\n    }), m(Button, {\n      className: \"Button\",\n      onclick: () => app.modal.show(SelectCategoriesModal)\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.select_categories_button'))), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.blog_heading')\n    }, [Switch.component({\n      state: this.allowComments == true,\n      onchange: val => {\n        this.allowComments = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.allow_comments_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.allow_comments_text'))]), Switch.component({\n      state: this.requiresReviewOnPost == true,\n      onchange: val => {\n        this.requiresReviewOnPost = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.require_review_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.require_review_text'))]), Switch.component({\n      state: this.hideOnDiscussionList == true,\n      onchange: val => {\n        this.hideOnDiscussionList = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_on_discussion_list_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_on_discussion_list_text'))]), Switch.component({\n      state: this.addSidebarNav == true,\n      onchange: val => {\n        this.addSidebarNav = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_sidebar_nav_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_sidebar_nav_text'))]), Switch.component({\n      state: this.blogAddHero == true,\n      onchange: val => {\n        this.blogAddHero = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_hero_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_hero_text'))]), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.featured_count_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.featured_count_text')), m(\"input\", {\n      class: \"FormControl\",\n      value: this.featuredCount,\n      oninput: e => {\n        this.featuredCount = e.target.value;\n        this.hasChanges = true;\n      },\n      placeholder: \"3\",\n      type: \"number\"\n    }))]), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.categories_heading')\n    }, [Switch.component({\n      state: this.hideTagsInList == true,\n      onchange: val => {\n        this.hideTagsInList = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_tags_in_taglist_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_tags_in_taglist_text'))]), Switch.component({\n      state: this.addCategoryHierarchy == true,\n      onchange: val => {\n        this.addCategoryHierarchy = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.show_tag_hierarchy_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.show_tag_hierarchy_text'))])]), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirects_heading')\n    }, [Switch.component({\n      state: this.redirectsEnabled === 'both' || this.redirectsEnabled === 'discussions_only',\n      onchange: val => {\n        if (val) {\n          // Add\n          if (this.redirectsEnabled === 'tags_only') {\n            this.redirectsEnabled = 'both';\n          } else if (this.redirectsEnabled === 'none') {\n            this.redirectsEnabled = 'discussions_only';\n          }\n        } else {\n          if (this.redirectsEnabled === 'discussions_only') {\n            this.redirectsEnabled = 'none';\n          } else {\n            this.redirectsEnabled = 'tags_only';\n          }\n        }\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_articles_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_articles_text'))]), Switch.component({\n      state: this.redirectsEnabled === 'both' || this.redirectsEnabled === 'tags_only',\n      onchange: val => {\n        if (val) {\n          // Add\n          if (this.redirectsEnabled === 'discussions_only') {\n            this.redirectsEnabled = 'both';\n          } else if (this.redirectsEnabled === 'none') {\n            this.redirectsEnabled = 'tags_only';\n          }\n        } else {\n          if (this.redirectsEnabled === 'tags_only') {\n            this.redirectsEnabled = 'none';\n          } else {\n            this.redirectsEnabled = 'discussions_only';\n          }\n        }\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_tags_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_tags_text'))])]), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.default_article_image_label')\n    }, [m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.default_article_image_text')), UploadImageButton.component({\n      name: 'blog_default_image',\n      routePath: 'blog_default_image',\n      value: () => {\n        var _app$data$settings$bl1;\n        return (_app$data$settings$bl1 = app.data.settings.blog_default_image_path) != null ? _app$data$settings$bl1 : null;\n      },\n      url: () => {\n        var _app$forum$attribute;\n        return (_app$forum$attribute = app.forum.attribute('blog_default_imageUrl')) != null ? _app$forum$attribute : null;\n      }\n    })]), m(Button, {\n      loading: this.isSaving,\n      className: 'Button Button--primary',\n      onclick: () => this.save(),\n      disabled: !this.hasChanges\n    }, app.translator.trans('core.admin.settings.submit_button'))));\n  }\n\n  /**\n   * Save data\n   */\n  save() {\n    this.isSaving = true;\n    saveSettings({\n      blog_add_sidebar_nav: this.addSidebarNav,\n      blog_redirects_enabled: this.redirectsEnabled,\n      blog_hide_tags: this.hideTagsInList,\n      blog_requires_review: this.requiresReviewOnPost,\n      blog_allow_comments: this.allowComments,\n      blog_category_hierarchy: this.addCategoryHierarchy,\n      blog_filter_discussion_list: this.hideOnDiscussionList,\n      blog_featured_count: this.featuredCount,\n      blog_add_hero: this.blogAddHero\n    }).then(() => {\n      this.hasChanges = false;\n\n      // Show saved message\n      app.alerts.show(Alert, {\n        type: 'success'\n      }, app.translator.trans('core.admin.settings.saved_message'));\n    }).catch(() => {}).then(() => {\n      this.isSaving = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'admin/pages/BlogSettings', BlogSettings);","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/admin/app';\nimport BasicsPage from 'flarum/admin/components/BasicsPage';\nimport PermissionGrid from 'flarum/admin/components/PermissionGrid';\nimport BlogSettings from './pages/BlogSettings';\napp.initializers.add('vadkuz-flarum2-blog', () => {\n  // Register extension settings page\n  app.registry.for('vadkuz-flarum2-blog').registerPage(BlogSettings);\n  app.registry.for('vadkuz-flarum2-blog').registerPermission({\n    icon: 'fas fa-pencil-alt',\n    label: app.translator.trans('vadkuz-flarum2-blog.admin.permissions.write_articles'),\n    permission: 'blog.writeArticles'\n  }, 'blog', 90).registerPermission({\n    icon: 'far fa-star',\n    label: app.translator.trans('vadkuz-flarum2-blog.admin.permissions.auto_approve_posts'),\n    permission: 'blog.autoApprovePosts'\n  }, 'blog', 90).registerPermission({\n    icon: 'far fa-thumbs-up',\n    label: app.translator.trans('vadkuz-flarum2-blog.admin.permissions.approve_posts'),\n    permission: 'blog.canApprovePosts'\n  }, 'blog', 90);\n\n  // Add addPermissions\n  extend(PermissionGrid.prototype, 'permissionItems', function (items) {\n    var _this$attrs, _app$registry$getExte, _app$registry$getExte2, _app$registry$getExte3;\n    const extensionId = (_this$attrs = this.attrs) == null ? void 0 : _this$attrs.extensionId;\n    const permissions = extensionId ? (_app$registry$getExte = (_app$registry$getExte2 = app.registry.getExtensionPermissions(extensionId, 'blog')) == null || (_app$registry$getExte3 = _app$registry$getExte2.toArray) == null ? void 0 : _app$registry$getExte3.call(_app$registry$getExte2)) != null ? _app$registry$getExte : [] : app.registry.getAllPermissions('blog').toArray();\n\n    // Add blog permissions\n    items.add('blog', {\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.blog'),\n      children: permissions\n    }, 80);\n  });\n  extend(BasicsPage.prototype, 'homePageItems', items => {\n    items.add('blog', {\n      path: '/blog',\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.blog')\n    });\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","SelectCategoriesModal","oninit","vnode","super","this","blogCategoriesOriginal","settings","blog_tags","split","blogCategories","hasChanges","title","className","content","m","href","attribute","target","width","all","length","colSpan","map","parent","toggleTag","currentIndex","indexOf","id","splice","push","icon","onclick","name","state","onchange","style","type","loading","disabled","onsubmit","e","preventDefault","hide","validBlogTags","tagId","getById","join","then","show","trans","catch","loaded","add","BlogSettings","attrs","_app$data$settings$bl","_app$data$settings$bl2","_app$data$settings$bl3","_app$data$settings$bl4","_app$data$settings$bl5","_app$data$settings$bl6","_app$data$settings$bl7","_app$data$settings$bl8","_app$data$settings$bl9","_app$data$settings$bl0","isSaving","redirectsEnabled","blog_redirects_enabled","hideTagsInList","blog_hide_tags","allowComments","blog_allow_comments","hideOnDiscussionList","blog_filter_discussion_list","requiresReviewOnPost","blog_requires_review","addCategoryHierarchy","blog_category_hierarchy","addSidebarNav","blog_add_sidebar_nav","featuredCount","blog_featured_count","blogAddHero","blog_add_hero","defaultImagePath","blog_default_image_path","data","attributes","blog_default_imageUrl","concat","blogCategoriesCount","count","label","val","class","value","oninput","placeholder","routePath","_app$data$settings$bl1","url","_app$forum$attribute","save","redraw","for","registerPage","registerPermission","permission","extend","items","_this$attrs","_app$registry$getExte","_app$registry$getExte2","_app$registry$getExte3","extensionId","permissions","getExtensionPermissions","toArray","getAllPermissions","children","path"],"sourceRoot":""}