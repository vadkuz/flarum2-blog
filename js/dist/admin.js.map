{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@vadkuz/flarum2-blog/webpack/bootstrap","webpack://@vadkuz/flarum2-blog/webpack/runtime/compat get default export","webpack://@vadkuz/flarum2-blog/webpack/runtime/define property getters","webpack://@vadkuz/flarum2-blog/webpack/runtime/hasOwnProperty shorthand","webpack://@vadkuz/flarum2-blog/webpack/runtime/make namespace object","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/BasicsPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/PermissionGrid')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/utils/saveSettings')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/FieldSet')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/UploadImageButton')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/FormModal')\"","webpack://@vadkuz/flarum2-blog/./src/admin/components/Modals/SelectCategoriesModal.js","webpack://@vadkuz/flarum2-blog/./src/admin/pages/BlogSettings.js","webpack://@vadkuz/flarum2-blog/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/BasicsPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/PermissionGrid');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/utils/saveSettings');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FieldSet');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/UploadImageButton');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FormModal');","import app from 'flarum/admin/app';\nimport FormModal from 'flarum/common/components/FormModal';\nimport Button from 'flarum/common/components/Button';\nimport Alert from 'flarum/common/components/Alert';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Switch from 'flarum/common/components/Switch';\nexport default class SelectCategoriesModal extends FormModal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.blogCategoriesOriginal = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|') : [];\n    this.blogCategories = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|') : [];\n    this.hasChanges = false;\n  }\n  title() {\n    return 'Select blog categories';\n  }\n  className() {\n    return 'Modal modal-dialog FlarumBlog-TagsModal';\n  }\n  content() {\n    return m(\"div\", null, m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"p\", null, \"Please select one or more tags that are considered blog tags.\", ' ', m(\"a\", {\n      href: app.forum.attribute('baseUrl') + '/blog',\n      target: '_blank'\n    }, \"Visit your blog.\")), m(\"table\", {\n      className: 'FlarumBlog-TagsTable'\n    }, m(\"thead\", null, m(\"tr\", null, m(\"th\", {\n      width: \"35\"\n    }), m(\"th\", null, \"Tag name\"), m(\"th\", {\n      width: \"50\"\n    }))), m(\"tbody\", null, app.store.all('tags').length === 0 && m(\"tr\", null, m(\"td\", {\n      colSpan: \"3\"\n    }, \"You currently have no tags.\")), app.store.all('tags').map(obj => {\n      // Skip all tags who aren't main categories\n      if (obj.parent()) {\n        return;\n      }\n\n      // Toggle tag\n      const toggleTag = () => {\n        const currentIndex = this.blogCategories.indexOf(obj.id());\n        this.hasChanges = true;\n\n        // Remove tag\n        if (currentIndex >= 0) {\n          this.blogCategories.splice(currentIndex, 1);\n        } else {\n          // Add tag\n          this.blogCategories.push(obj.id());\n        }\n      };\n      return m(\"tr\", null, m(\"td\", null, m(\"i\", {\n        className: obj.icon()\n      })), m(\"td\", {\n        onclick: toggleTag\n      }, obj.name()), m(\"td\", null, m(Switch, {\n        state: this.blogCategories.indexOf(obj.id()) >= 0,\n        onchange: toggleTag\n      })));\n    })))), m(\"div\", {\n      style: \"padding: 25px 30px; text-align: center;\"\n    }, m(Button, {\n      type: \"submit\",\n      className: \"Button Button--primary\",\n      loading: this.loading,\n      disabled: this.loading\n    }, this.hasChanges ? 'Save changes' : 'Close')));\n  }\n\n  // Close or save setting\n  onsubmit(e) {\n    e.preventDefault();\n    if (!this.hasChanges) {\n      this.hide();\n      return;\n    }\n    this.loading = true;\n\n    // Validate tags and prevent ghost tags (deleted tags)\n    let validBlogTags = [];\n    this.blogCategories.map(tagId => {\n      if (app.store.getById('tags', tagId)) {\n        validBlogTags.push(tagId);\n      }\n    });\n    saveSettings({\n      blog_tags: validBlogTags.join('|')\n    }).then(() => {\n      app.alerts.show(Alert, {\n        type: 'success'\n      }, app.translator.trans('core.admin.settings.saved_message'));\n      this.hide();\n    }).catch(() => {\n      app.alerts.show(Alert, {\n        type: 'error'\n      }, app.translator.trans('core.lib.error.generic_message'));\n    }).then(() => {\n      this.loaded();\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'admin/components/Modals/SelectCategoriesModal', SelectCategoriesModal);","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport Switch from 'flarum/common/components/Switch';\nimport UploadImageButton from 'flarum/common/components/UploadImageButton';\nimport SelectCategoriesModal from '../components/Modals/SelectCategoriesModal';\nexport default class BlogSettings extends ExtensionPage {\n  oninit(attrs) {\n    var _app$data$settings$bl, _app$data$settings$bl2, _app$data$settings$bl3, _app$data$settings$bl4, _app$data$settings$bl5, _app$data$settings$bl6, _app$data$settings$bl7, _app$data$settings$bl8, _app$data$settings$bl9, _app$data$settings$bl0;\n    super.oninit(attrs);\n\n    // Form\n    this.hasChanges = false;\n    this.isSaving = false;\n\n    // Settings\n    this.redirectsEnabled = (_app$data$settings$bl = app.data.settings.blog_redirects_enabled) != null ? _app$data$settings$bl : 'both';\n    this.hideTagsInList = (_app$data$settings$bl2 = app.data.settings.blog_hide_tags) != null ? _app$data$settings$bl2 : true;\n    this.allowComments = (_app$data$settings$bl3 = app.data.settings.blog_allow_comments) != null ? _app$data$settings$bl3 : true;\n    this.hideOnDiscussionList = (_app$data$settings$bl4 = app.data.settings.blog_filter_discussion_list) != null ? _app$data$settings$bl4 : false;\n    this.requiresReviewOnPost = (_app$data$settings$bl5 = app.data.settings.blog_requires_review) != null ? _app$data$settings$bl5 : false;\n    this.addCategoryHierarchy = (_app$data$settings$bl6 = app.data.settings.blog_category_hierarchy) != null ? _app$data$settings$bl6 : true;\n    this.addSidebarNav = (_app$data$settings$bl7 = app.data.settings.blog_add_sidebar_nav) != null ? _app$data$settings$bl7 : true;\n    this.featuredCount = (_app$data$settings$bl8 = app.data.settings.blog_featured_count) != null ? _app$data$settings$bl8 : 3;\n    this.blogAddHero = (_app$data$settings$bl9 = app.data.settings.blog_add_hero) != null ? _app$data$settings$bl9 : true;\n    const defaultImagePath = (_app$data$settings$bl0 = app.data.settings.blog_default_image_path) != null ? _app$data$settings$bl0 : null;\n    app.forum.data.attributes.blog_default_imageUrl = defaultImagePath ? \"\".concat(app.forum.attribute('baseUrl'), \"/assets/\").concat(defaultImagePath) : null;\n  }\n  content() {\n    const blogCategoriesCount = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|').length : 0;\n    return m(\"div\", {\n      className: \"BasicsPage FlarumBlog\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: 'FlarumBlog-SelectCategories'\n    }, blogCategoriesCount === 0 ? app.translator.trans('vadkuz-flarum2-blog.admin.settings.no_categories_selected') : app.translator.trans('vadkuz-flarum2-blog.admin.settings.selected_category_count', {\n      count: blogCategoriesCount\n    }), m(Button, {\n      className: \"Button\",\n      onclick: () => app.modal.show(SelectCategoriesModal)\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.select_categories_button'))), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.blog_heading')\n    }, [Switch.component({\n      state: this.allowComments == true,\n      onchange: val => {\n        this.allowComments = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.allow_comments_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.allow_comments_text'))]), Switch.component({\n      state: this.requiresReviewOnPost == true,\n      onchange: val => {\n        this.requiresReviewOnPost = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.require_review_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.require_review_text'))]), Switch.component({\n      state: this.hideOnDiscussionList == true,\n      onchange: val => {\n        this.hideOnDiscussionList = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_on_discussion_list_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_on_discussion_list_text'))]), Switch.component({\n      state: this.addSidebarNav == true,\n      onchange: val => {\n        this.addSidebarNav = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_sidebar_nav_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_sidebar_nav_text'))]), Switch.component({\n      state: this.blogAddHero == true,\n      onchange: val => {\n        this.blogAddHero = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_hero_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.add_hero_text'))]), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.featured_count_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.featured_count_text')), m(\"input\", {\n      class: \"FormControl\",\n      value: this.featuredCount,\n      oninput: e => {\n        this.featuredCount = e.target.value;\n        this.hasChanges = true;\n      },\n      placeholder: \"3\",\n      type: \"number\"\n    }))]), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.categories_heading')\n    }, [Switch.component({\n      state: this.hideTagsInList == true,\n      onchange: val => {\n        this.hideTagsInList = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_tags_in_taglist_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.hide_tags_in_taglist_text'))]), Switch.component({\n      state: this.addCategoryHierarchy == true,\n      onchange: val => {\n        this.addCategoryHierarchy = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.show_tag_hierarchy_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.show_tag_hierarchy_text'))])]), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirects_heading')\n    }, [Switch.component({\n      state: this.redirectsEnabled === 'both' || this.redirectsEnabled === 'discussions_only',\n      onchange: val => {\n        if (val) {\n          // Add\n          if (this.redirectsEnabled === 'tags_only') {\n            this.redirectsEnabled = 'both';\n          } else if (this.redirectsEnabled === 'none') {\n            this.redirectsEnabled = 'discussions_only';\n          }\n        } else {\n          if (this.redirectsEnabled === 'discussions_only') {\n            this.redirectsEnabled = 'none';\n          } else {\n            this.redirectsEnabled = 'tags_only';\n          }\n        }\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_articles_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_articles_text'))]), Switch.component({\n      state: this.redirectsEnabled === 'both' || this.redirectsEnabled === 'tags_only',\n      onchange: val => {\n        if (val) {\n          // Add\n          if (this.redirectsEnabled === 'discussions_only') {\n            this.redirectsEnabled = 'both';\n          } else if (this.redirectsEnabled === 'none') {\n            this.redirectsEnabled = 'tags_only';\n          }\n        } else {\n          if (this.redirectsEnabled === 'tags_only') {\n            this.redirectsEnabled = 'none';\n          } else {\n            this.redirectsEnabled = 'discussions_only';\n          }\n        }\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_tags_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.redirect_tags_text'))])]), FieldSet.component({\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.settings.default_article_image_label')\n    }, [m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('vadkuz-flarum2-blog.admin.settings.default_article_image_text')), UploadImageButton.component({\n      name: 'blog_default_image',\n      routePath: 'blog_default_image',\n      value: () => {\n        var _app$data$settings$bl1;\n        return (_app$data$settings$bl1 = app.data.settings.blog_default_image_path) != null ? _app$data$settings$bl1 : null;\n      },\n      url: () => {\n        var _app$forum$attribute;\n        return (_app$forum$attribute = app.forum.attribute('blog_default_imageUrl')) != null ? _app$forum$attribute : null;\n      }\n    })]), m(Button, {\n      loading: this.isSaving,\n      className: 'Button Button--primary',\n      onclick: () => this.save(),\n      disabled: !this.hasChanges\n    }, app.translator.trans('core.admin.settings.submit_button'))));\n  }\n\n  /**\n   * Save data\n   */\n  save() {\n    this.isSaving = true;\n    saveSettings({\n      blog_add_sidebar_nav: this.addSidebarNav,\n      blog_redirects_enabled: this.redirectsEnabled,\n      blog_hide_tags: this.hideTagsInList,\n      blog_requires_review: this.requiresReviewOnPost,\n      blog_allow_comments: this.allowComments,\n      blog_category_hierarchy: this.addCategoryHierarchy,\n      blog_filter_discussion_list: this.hideOnDiscussionList,\n      blog_featured_count: this.featuredCount,\n      blog_add_hero: this.blogAddHero\n    }).then(() => {\n      this.hasChanges = false;\n\n      // Show saved message\n      app.alerts.show(Alert, {\n        type: 'success'\n      }, app.translator.trans('core.admin.settings.saved_message'));\n    }).catch(() => {}).then(() => {\n      this.isSaving = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'admin/pages/BlogSettings', BlogSettings);","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/admin/app';\nimport BasicsPage from 'flarum/admin/components/BasicsPage';\nimport PermissionGrid from 'flarum/admin/components/PermissionGrid';\nimport BlogSettings from './pages/BlogSettings';\napp.initializers.add('vadkuz-flarum2-blog', () => {\n  // Register extension settings page\n  app.registry.for('vadkuz-flarum2-blog').registerPage(BlogSettings);\n  app.registry.for('vadkuz-flarum2-blog').registerPermission({\n    icon: 'fas fa-pencil-alt',\n    label: app.translator.trans('vadkuz-flarum2-blog.admin.permissions.write_articles'),\n    permission: 'blog.writeArticles'\n  }, 'blog', 90).registerPermission({\n    icon: 'far fa-star',\n    label: app.translator.trans('vadkuz-flarum2-blog.admin.permissions.auto_approve_posts'),\n    permission: 'blog.autoApprovePosts'\n  }, 'blog', 90).registerPermission({\n    icon: 'far fa-thumbs-up',\n    label: app.translator.trans('vadkuz-flarum2-blog.admin.permissions.approve_posts'),\n    permission: 'blog.canApprovePosts'\n  }, 'blog', 90);\n\n  // Add addPermissions\n  extend(PermissionGrid.prototype, 'permissionItems', function (items) {\n    var _this$attrs, _app$registry$getExte, _app$registry$getExte2, _app$registry$getExte3;\n    const extensionId = (_this$attrs = this.attrs) == null ? void 0 : _this$attrs.extensionId;\n    const permissions = extensionId ? (_app$registry$getExte = (_app$registry$getExte2 = app.registry.getExtensionPermissions(extensionId, 'blog')) == null || (_app$registry$getExte3 = _app$registry$getExte2.toArray) == null ? void 0 : _app$registry$getExte3.call(_app$registry$getExte2)) != null ? _app$registry$getExte : [] : app.registry.getAllPermissions('blog').toArray();\n\n    // Add blog permissions\n    items.add('blog', {\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.blog'),\n      children: permissions\n    }, 80);\n  });\n  extend(BasicsPage.prototype, 'homePageItems', items => {\n    items.add('blog', {\n      path: '/blog',\n      label: app.translator.trans('vadkuz-flarum2-blog.admin.blog')\n    });\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","SelectCategoriesModal","oninit","vnode","super","this","blogCategoriesOriginal","blogCategories","hasChanges","title","className","content","m","href","target","width","length","colSpan","map","parent","toggleTag","currentIndex","indexOf","id","splice","push","icon","onclick","name","state","onchange","style","type","loading","disabled","onsubmit","e","preventDefault","hide","validBlogTags","tagId","blog_tags","join","then","catch","loaded","add","BlogSettings","attrs","_app$data$settings$bl","_app$data$settings$bl2","_app$data$settings$bl3","_app$data$settings$bl4","_app$data$settings$bl5","_app$data$settings$bl6","_app$data$settings$bl7","_app$data$settings$bl8","_app$data$settings$bl9","_app$data$settings$bl0","isSaving","redirectsEnabled","hideTagsInList","allowComments","hideOnDiscussionList","requiresReviewOnPost","addCategoryHierarchy","addSidebarNav","featuredCount","blogAddHero","defaultImagePath","concat","blogCategoriesCount","count","label","val","class","oninput","placeholder","routePath","_app$data$settings$bl1","url","_app$forum$attribute","save","blog_add_sidebar_nav","blog_redirects_enabled","blog_hide_tags","blog_requires_review","blog_allow_comments","blog_category_hierarchy","blog_filter_discussion_list","blog_featured_count","blog_add_hero","redraw","registerPage","registerPermission","permission","extend","items","_this$attrs","_app$registry$getExte","_app$registry$getExte2","_app$registry$getExte3","extensionId","permissions","toArray","children","path"],"sourceRoot":""}