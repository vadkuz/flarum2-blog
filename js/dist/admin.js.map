{"version":3,"file":"admin.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,IACzBH,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,M,+BCLvD,MAAM,EAA+BC,OAAOC,IAAIV,IAAI,OAAQ,iBCAtD,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,+B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,mC,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,a,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,kC,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,2B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,8B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,2B,aCK7C,MAAMW,UAA8B,KACjDC,OAAOC,GACLC,MAAMF,OAAOC,GACbE,KAAKC,uBAAyBC,IAAIC,KAAKC,SAASC,UAAYH,IAAIC,KAAKC,SAASC,UAAUC,MAAM,KAAO,GACrGN,KAAKO,eAAiBL,IAAIC,KAAKC,SAASC,UAAYH,IAAIC,KAAKC,SAASC,UAAUC,MAAM,KAAO,GAC7FN,KAAKQ,UAAW,EAChBR,KAAKS,YAAa,EAEpBC,QACE,MAAO,yBAETC,YACE,MAAO,0CAETC,UACE,OAAOC,EAAE,MAAO,KAAMA,EAAE,MAAO,CAC7BF,UAAW,cACVE,EAAE,IAAK,KAAM,gEAAiE,IAAKA,EAAE,IAAK,CAC3FC,KAAMZ,IAAIa,MAAMC,UAAU,WAAa,QACvCC,OAAQ,UACP,qBAAsBJ,EAAE,QAAS,CAClCF,UAAW,wBACVE,EAAE,QAAS,KAAMA,EAAE,KAAM,CAC1BK,MAAO,OACLL,EAAE,KAAM,KAAM,YAAaA,EAAE,KAAM,CACrCK,MAAO,QACJL,EAAE,QAAS,KAAuC,IAAjCX,IAAIiB,MAAMC,IAAI,QAAQC,QAAgBR,EAAE,KAAM,KAAMA,EAAE,KAAM,CAChFS,QAAS,KACR,gCAAiCpB,IAAIiB,MAAMC,IAAI,QAAQG,KAAIrC,IAE5D,GAAIA,EAAIsC,SACN,OAIF,MAAMC,EAAY,KAChB,MAAMC,EAAe1B,KAAKO,eAAeoB,QAAQzC,EAAI0C,MACrD5B,KAAKS,YAAa,EAGdiB,GAAgB,EAClB1B,KAAKO,eAAesB,OAAOH,EAAc,GAGzC1B,KAAKO,eAAeuB,KAAK5C,EAAI0C,OAGjC,OAAOf,EAAE,KAAM,KAAMA,EAAE,KAAM,KAAMA,EAAE,IAAK,CACxCF,UAAWzB,EAAI6C,UACZlB,EAAE,KAAM,CACXmB,QAASP,GACRvC,EAAI+C,QAASpB,EAAE,KAAM,KAAMA,EAAE,IAAQ,CACtCqB,MAAOlC,KAAKO,eAAeoB,QAAQzC,EAAI0C,OAAS,EAChDO,SAAUV,YAEPZ,EAAE,MAAO,CACduB,MAAO,2CACNvB,EAAE,IAAQ,CACXwB,KAAM,SACN1B,UAAW,yBACX2B,QAAStC,KAAKsC,SACbtC,KAAKS,WAAa,eAAiB,WAIxC8B,SAASC,GAEP,GADAA,EAAEC,kBACGzC,KAAKS,WAER,YADAT,KAAK0C,OAGP1C,KAAKQ,UAAW,EAGhB,IAAImC,EAAgB,GACpB3C,KAAKO,eAAegB,KAAIqB,IAClB1C,IAAIiB,MAAM0B,QAAQ,OAAQD,IAC5BD,EAAcb,KAAKc,MAGvB,IAAa,CACXvC,UAAWsC,EAAcG,KAAK,OAC7BC,MAAK,KACN7C,IAAI8C,OAAOC,KAAK,IAAO,CACrBZ,KAAM,WACLnC,IAAIgD,WAAWC,MAAM,sCACxBnD,KAAK0C,UACJU,OAAM,KACPlD,IAAI8C,OAAOC,KAAK,IAAO,CACrBZ,KAAM,SACLnC,IAAIgD,WAAWC,MAAM,sCACvBJ,MAAK,KACN/C,KAAKQ,UAAW,MAItBd,OAAOC,IAAI0D,IAAI,sBAAuB,gDAAiDzD,GCrGvF,MAAM,EAA+BF,OAAOC,IAAIV,IAAI,OAAQ,sC,aCS7C,MAAMqE,UAAqB,KACxCzD,OAAO0D,GACL,IAAIC,EAAuBC,EAAwBC,EAAwBC,EAAwBC,EAAwBC,EAAwBC,EAAwBC,EAAwBC,EACnMjE,MAAMF,OAAO0D,GAGbvD,KAAKS,YAAa,EAClBT,KAAKQ,UAAW,EAGhBR,KAAKiE,iBAAyF,OAArET,EAAwB,0CAAoDA,EAAwB,OAC7HxD,KAAKkE,eAAgF,OAA9DT,EAAyB,mCAA4CA,EAC5FzD,KAAKmE,cAAoF,OAAnET,EAAyB,wCAAiDA,EAChG1D,KAAKoE,qBAAmG,OAA3ET,EAAyB,gDAAyDA,EAC/G3D,KAAKqE,qBAA4F,OAApET,EAAyB,yCAAkDA,EACxG5D,KAAKsE,qBAA+F,OAAvET,EAAyB,4CAAqDA,EAC3G7D,KAAKuE,cAAqF,OAApET,EAAyB,yCAAkDA,EACjG9D,KAAKwE,cAAoF,OAAnET,EAAyB,uCAAiDA,EAAyB,EACzH/D,KAAKyE,YAA4E,OAA7DT,EAAyB,kCAA2CA,EACxF,gDAAkD,GAAGU,OAAO,oBAAoB,WAAY,YAAYA,OAAO,2CAEjH9D,UACE,MAAM+D,EAAsB,4BAA8B,kCAAkC,KAAKtD,OAAS,EAC1G,OAAOR,EAAE,MAAO,CACdF,UAAW,yBACVE,EAAE,MAAO,CACVF,UAAW,aACVE,EAAE,MAAO,CACVF,UAAW,+BACc,IAAxBgE,EAA4B,qBAAqB,oEAAsE,qBAAqB,oEAAqE,CAClNC,MAAOD,IACL9D,EAAE,IAAQ,CACZF,UAAW,SACXqB,QAAS,IAAM,eAAepC,IAC7B,qBAAqB,wEAAyE,cAAmB,CAClHiF,MAAO,qBAAqB,2DAC3B,CAAC,cAAiB,CACnB3C,MAA6B,GAAtBlC,KAAKmE,cACZhC,SAAU2C,IACR9E,KAAKmE,cAAgBW,EACrB9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,mEAAoEA,EAAE,MAAO,CACjHF,UAAW,YACV,qBAAqB,oEAAqE,cAAiB,CAC5GuB,MAAoC,GAA7BlC,KAAKqE,qBACZlC,SAAU2C,IACR9E,KAAKqE,qBAAuBS,EAC5B9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,mEAAoEA,EAAE,MAAO,CACjHF,UAAW,YACV,qBAAqB,oEAAqE,cAAiB,CAC5GuB,MAAoC,GAA7BlC,KAAKoE,qBACZjC,SAAU2C,IACR9E,KAAKoE,qBAAuBU,EAC5B9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,4EAA6EA,EAAE,MAAO,CAC1HF,UAAW,YACV,qBAAqB,6EAA8E,cAAiB,CACrHuB,MAA6B,GAAtBlC,KAAKuE,cACZpC,SAAU2C,IACR9E,KAAKuE,cAAgBO,EACrB9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,oEAAqEA,EAAE,MAAO,CAClHF,UAAW,YACV,qBAAqB,qEAAsE,cAAiB,CAC7GuB,MAA2B,GAApBlC,KAAKyE,YACZtC,SAAU2C,IACR9E,KAAKyE,YAAcK,EACnB9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,6DAA8DA,EAAE,MAAO,CAC3GF,UAAW,YACV,qBAAqB,8DAA+DE,EAAE,MAAO,CAC9FF,UAAW,cACVE,EAAE,QAAS,KAAM,qBAAqB,mEAAoEA,EAAE,MAAO,CACpHF,UAAW,YACV,qBAAqB,kEAAmEE,EAAE,QAAS,CACpGkE,MAAO,cACPtF,MAAOO,KAAKwE,cACZQ,QAASxC,IACPxC,KAAKwE,cAAgBhC,EAAEvB,OAAOxB,MAC9BO,KAAKS,YAAa,GAEpBwE,YAAa,IACb5C,KAAM,cACD,cAAmB,CACxBwC,MAAO,qBAAqB,iEAC3B,CAAC,cAAiB,CACnB3C,MAA8B,GAAvBlC,KAAKkE,eACZ/B,SAAU2C,IACR9E,KAAKkE,eAAiBY,EACtB9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,yEAA0EA,EAAE,MAAO,CACvHF,UAAW,YACV,qBAAqB,0EAA2E,cAAiB,CAClHuB,MAAoC,GAA7BlC,KAAKsE,qBACZnC,SAAU2C,IACR9E,KAAKsE,qBAAuBQ,EAC5B9E,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,uEAAwEA,EAAE,MAAO,CACrHF,UAAW,YACV,qBAAqB,0EAA2E,cAAmB,CACpHkE,MAAO,qBAAqB,gEAC3B,CAAC,cAAiB,CACnB3C,MAAiC,SAA1BlC,KAAKiE,kBAAyD,qBAA1BjE,KAAKiE,iBAChD9B,SAAU2C,IACJA,EAE4B,cAA1B9E,KAAKiE,iBACPjE,KAAKiE,iBAAmB,OACW,SAA1BjE,KAAKiE,mBACdjE,KAAKiE,iBAAmB,oBAGI,qBAA1BjE,KAAKiE,iBACPjE,KAAKiE,iBAAmB,OAExBjE,KAAKiE,iBAAmB,YAG5BjE,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,sEAAuEA,EAAE,MAAO,CACpHF,UAAW,YACV,qBAAqB,uEAAwE,cAAiB,CAC/GuB,MAAiC,SAA1BlC,KAAKiE,kBAAyD,cAA1BjE,KAAKiE,iBAChD9B,SAAU2C,IACJA,EAE4B,qBAA1B9E,KAAKiE,iBACPjE,KAAKiE,iBAAmB,OACW,SAA1BjE,KAAKiE,mBACdjE,KAAKiE,iBAAmB,aAGI,cAA1BjE,KAAKiE,iBACPjE,KAAKiE,iBAAmB,OAExBjE,KAAKiE,iBAAmB,mBAG5BjE,KAAKS,YAAa,IAEnB,CAACI,EAAE,IAAK,KAAM,qBAAqB,kEAAmEA,EAAE,MAAO,CAChHF,UAAW,YACV,qBAAqB,qEAAsE,cAAmB,CAC/GkE,MAAO,qBAAqB,0EAC3B,CAAChE,EAAE,MAAO,CACXF,UAAW,YACV,qBAAqB,yEAA0E,cAA4B,CAC5HsB,KAAM,yBACFpB,EAAE,IAAQ,CACdyB,QAAStC,KAAKQ,SACdG,UAAW,yBACXqB,QAAS,IAAMhC,KAAKkF,OACpBC,UAAWnF,KAAKS,YACf,qBAAqB,wCAM1ByE,OACElF,KAAKQ,UAAW,EAChB,IAAa,CACX4E,qBAAsBpF,KAAKuE,cAC3Bc,uBAAwBrF,KAAKiE,iBAC7BqB,eAAgBtF,KAAKkE,eACrBqB,qBAAsBvF,KAAKqE,qBAC3BmB,oBAAqBxF,KAAKmE,cAC1BsB,wBAAyBzF,KAAKsE,qBAC9BoB,4BAA6B1F,KAAKoE,qBAClCuB,oBAAqB3F,KAAKwE,cAC1BoB,cAAe5F,KAAKyE,cACnB1B,MAAK,KACN/C,KAAKS,YAAa,EAGlB,gBAAgB,IAAO,CACrB4B,KAAM,WACL,qBAAqB,yCACvBe,OAAM,SAAUL,MAAK,KACtB/C,KAAKQ,UAAW,EAChBK,EAAEgF,aAIRnG,OAAOC,IAAI0D,IAAI,sBAAuB,2BAA4BC,GCtMlEpD,IAAI4F,aAAazC,IAAI,uBAAuB,KAE1CnD,IAAI6F,cAAcC,IAAI,uBAAuBC,aAAa3C,GAC1DpD,IAAI6F,cAAcC,IAAI,uBAAuBE,mBAAmB,CAC9DnE,KAAM,oBACN8C,MAAO3E,IAAIgD,WAAWC,MAAM,+DAC5BgD,WAAY,sBACX,OAAQ,IAAID,mBAAmB,CAChCnE,KAAM,cACN8C,MAAO3E,IAAIgD,WAAWC,MAAM,mEAC5BgD,WAAY,yBACX,OAAQ,IAAID,mBAAmB,CAChCnE,KAAM,mBACN8C,MAAO3E,IAAIgD,WAAWC,MAAM,8DAC5BgD,WAAY,wBACX,OAAQ,KAGX,IAAAC,QAAO,cAA0B,mBAAmB,SAAUC,GAE5DA,EAAMhD,IAAI,OAAQ,CAChBwB,MAAO3E,IAAIgD,WAAWC,MAAM,yCAC5BmD,SAAUtG,KAAKuD,MAAMgD,YAAcrG,IAAI6F,cAAcS,wBAAwBxG,KAAKuG,YAAa,QAAQE,UAAYvG,IAAI6F,cAAcW,2BAA2B,QAAQD,WACvK,QAEL,IAAAL,QAAO,cAAsB,iBAAiBC,IAC5CA,EAAMhD,IAAI,OAAQ,CAChBsD,KAAM,QACN9B,MAAO3E,IAAIgD,WAAWC,MAAM,kD","sources":["webpack://@vadkuz/flarum2-blog/webpack/bootstrap","webpack://@vadkuz/flarum2-blog/webpack/runtime/compat get default export","webpack://@vadkuz/flarum2-blog/webpack/runtime/define property getters","webpack://@vadkuz/flarum2-blog/webpack/runtime/hasOwnProperty shorthand","webpack://@vadkuz/flarum2-blog/webpack/runtime/make namespace object","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/BasicsPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/PermissionGrid')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/utils/saveSettings')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/FieldSet')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@vadkuz/flarum2-blog/./src/admin/components/Modals/SelectCategoriesModal.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'admin/components/UploadImageButton')\"","webpack://@vadkuz/flarum2-blog/./src/admin/pages/BlogSettings.js","webpack://@vadkuz/flarum2-blog/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/BasicsPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/PermissionGrid');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/utils/saveSettings');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FieldSet');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Alert from 'flarum/common/components/Alert';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Switch from 'flarum/common/components/Switch';\nexport default class SelectCategoriesModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.blogCategoriesOriginal = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|') : [];\n    this.blogCategories = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|') : [];\n    this.isSaving = false;\n    this.hasChanges = false;\n  }\n  title() {\n    return 'Select blog categories';\n  }\n  className() {\n    return 'Modal modal-dialog FlarumBlog-TagsModal';\n  }\n  content() {\n    return m(\"div\", null, m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"p\", null, \"Please select one or more tags that are considered blog tags.\", ' ', m(\"a\", {\n      href: app.forum.attribute('baseUrl') + '/blog',\n      target: '_blank'\n    }, \"Visit your blog.\")), m(\"table\", {\n      className: 'FlarumBlog-TagsTable'\n    }, m(\"thead\", null, m(\"th\", {\n      width: \"35\"\n    }), m(\"th\", null, \"Tag name\"), m(\"th\", {\n      width: \"50\"\n    })), m(\"tbody\", null, app.store.all('tags').length === 0 && m(\"tr\", null, m(\"td\", {\n      colspan: \"3\"\n    }, \"You currently have no tags.\")), app.store.all('tags').map(obj => {\n      // Skip all tags who aren't main categories\n      if (obj.parent()) {\n        return;\n      }\n\n      // Toggle tag\n      const toggleTag = () => {\n        const currentIndex = this.blogCategories.indexOf(obj.id());\n        this.hasChanges = true;\n\n        // Remove tag\n        if (currentIndex >= 0) {\n          this.blogCategories.splice(currentIndex, 1);\n        } else {\n          // Add tag\n          this.blogCategories.push(obj.id());\n        }\n      };\n      return m(\"tr\", null, m(\"td\", null, m(\"i\", {\n        className: obj.icon()\n      })), m(\"td\", {\n        onclick: toggleTag\n      }, obj.name()), m(\"td\", null, m(Switch, {\n        state: this.blogCategories.indexOf(obj.id()) >= 0,\n        onchange: toggleTag\n      })));\n    })))), m(\"div\", {\n      style: \"padding: 25px 30px; text-align: center;\"\n    }, m(Button, {\n      type: \"submit\",\n      className: \"Button Button--primary\",\n      loading: this.loading\n    }, this.hasChanges ? 'Save changes' : 'Close')));\n  }\n\n  // Close or save setting\n  onsubmit(e) {\n    e.preventDefault();\n    if (!this.hasChanges) {\n      this.hide();\n      return;\n    }\n    this.isSaving = true;\n\n    // Validate tags and prevent ghost tags (deleted tags)\n    let validBlogTags = [];\n    this.blogCategories.map(tagId => {\n      if (app.store.getById('tags', tagId)) {\n        validBlogTags.push(tagId);\n      }\n    });\n    saveSettings({\n      blog_tags: validBlogTags.join('|')\n    }).then(() => {\n      app.alerts.show(Alert, {\n        type: 'success'\n      }, app.translator.trans('core.admin.settings.saved_message'));\n      this.hide();\n    }).catch(() => {\n      app.alerts.show(Alert, {\n        type: 'error'\n      }, app.translator.trans('core.lib.error.generic_message'));\n    }).then(() => {\n      this.isSaving = false;\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'admin/components/Modals/SelectCategoriesModal', SelectCategoriesModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/UploadImageButton');","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport Switch from 'flarum/common/components/Switch';\nimport SelectCategoriesModal from '../components/Modals/SelectCategoriesModal';\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\nexport default class BlogSettings extends ExtensionPage {\n  oninit(attrs) {\n    var _app$data$settings$bl, _app$data$settings$bl2, _app$data$settings$bl3, _app$data$settings$bl4, _app$data$settings$bl5, _app$data$settings$bl6, _app$data$settings$bl7, _app$data$settings$bl8, _app$data$settings$bl9;\n    super.oninit(attrs);\n\n    // Form\n    this.hasChanges = false;\n    this.isSaving = false;\n\n    // Settings\n    this.redirectsEnabled = (_app$data$settings$bl = app.data.settings.blog_redirects_enabled) != null ? _app$data$settings$bl : 'both';\n    this.hideTagsInList = (_app$data$settings$bl2 = app.data.settings.blog_hide_tags) != null ? _app$data$settings$bl2 : true;\n    this.allowComments = (_app$data$settings$bl3 = app.data.settings.blog_allow_comments) != null ? _app$data$settings$bl3 : true;\n    this.hideOnDiscussionList = (_app$data$settings$bl4 = app.data.settings.blog_filter_discussion_list) != null ? _app$data$settings$bl4 : false;\n    this.requiresReviewOnPost = (_app$data$settings$bl5 = app.data.settings.blog_requires_review) != null ? _app$data$settings$bl5 : false;\n    this.addCategoryHierarchy = (_app$data$settings$bl6 = app.data.settings.blog_category_hierarchy) != null ? _app$data$settings$bl6 : true;\n    this.addSidebarNav = (_app$data$settings$bl7 = app.data.settings.blog_add_sidebar_nav) != null ? _app$data$settings$bl7 : true;\n    this.featuredCount = (_app$data$settings$bl8 = app.data.settings.blog_featured_count) != null ? _app$data$settings$bl8 : 3;\n    this.blogAddHero = (_app$data$settings$bl9 = app.data.settings.blog_add_hero) != null ? _app$data$settings$bl9 : true;\n    app.forum.data.attributes.blog_default_imageUrl = \"\".concat(app.forum.attribute('baseUrl'), \"/assets/\").concat(app.data.settings.blog_default_image_path);\n  }\n  content() {\n    const blogCategoriesCount = app.data.settings.blog_tags ? app.data.settings.blog_tags.split('|').length : 0;\n    return m(\"div\", {\n      className: \"BasicsPage FlarumBlog\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: 'FlarumBlog-SelectCategories'\n    }, blogCategoriesCount === 0 ? app.translator.trans('v17development-flarum-blog.admin.settings.no_categories_selected') : app.translator.trans('v17development-flarum-blog.admin.settings.selected_category_count', {\n      count: blogCategoriesCount\n    }), m(Button, {\n      className: \"Button\",\n      onclick: () => app.modal.show(SelectCategoriesModal)\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.select_categories_button'))), FieldSet.component({\n      label: app.translator.trans('v17development-flarum-blog.admin.settings.blog_heading')\n    }, [Switch.component({\n      state: this.allowComments == true,\n      onchange: val => {\n        this.allowComments = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.allow_comments_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.allow_comments_text'))]), Switch.component({\n      state: this.requiresReviewOnPost == true,\n      onchange: val => {\n        this.requiresReviewOnPost = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.require_review_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.require_review_text'))]), Switch.component({\n      state: this.hideOnDiscussionList == true,\n      onchange: val => {\n        this.hideOnDiscussionList = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.hide_on_discussion_list_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.hide_on_discussion_list_text'))]), Switch.component({\n      state: this.addSidebarNav == true,\n      onchange: val => {\n        this.addSidebarNav = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.add_sidebar_nav_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.add_sidebar_nav_text'))]), Switch.component({\n      state: this.blogAddHero == true,\n      onchange: val => {\n        this.blogAddHero = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.add_hero_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.add_hero_text'))]), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('v17development-flarum-blog.admin.settings.featured_count_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.featured_count_text')), m(\"input\", {\n      class: \"FormControl\",\n      value: this.featuredCount,\n      oninput: e => {\n        this.featuredCount = e.target.value;\n        this.hasChanges = true;\n      },\n      placeholder: \"3\",\n      type: \"number\"\n    }))]), FieldSet.component({\n      label: app.translator.trans('v17development-flarum-blog.admin.settings.categories_heading')\n    }, [Switch.component({\n      state: this.hideTagsInList == true,\n      onchange: val => {\n        this.hideTagsInList = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.hide_tags_in_taglist_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.hide_tags_in_taglist_text'))]), Switch.component({\n      state: this.addCategoryHierarchy == true,\n      onchange: val => {\n        this.addCategoryHierarchy = val;\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.show_tag_hierarchy_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.show_tag_hierarchy_text'))])]), FieldSet.component({\n      label: app.translator.trans('v17development-flarum-blog.admin.settings.redirects_heading')\n    }, [Switch.component({\n      state: this.redirectsEnabled === 'both' || this.redirectsEnabled === 'discussions_only',\n      onchange: val => {\n        if (val) {\n          // Add\n          if (this.redirectsEnabled === 'tags_only') {\n            this.redirectsEnabled = 'both';\n          } else if (this.redirectsEnabled === 'none') {\n            this.redirectsEnabled = 'discussions_only';\n          }\n        } else {\n          if (this.redirectsEnabled === 'discussions_only') {\n            this.redirectsEnabled = 'none';\n          } else {\n            this.redirectsEnabled = 'tags_only';\n          }\n        }\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.redirect_articles_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.redirect_articles_text'))]), Switch.component({\n      state: this.redirectsEnabled === 'both' || this.redirectsEnabled === 'tags_only',\n      onchange: val => {\n        if (val) {\n          // Add\n          if (this.redirectsEnabled === 'discussions_only') {\n            this.redirectsEnabled = 'both';\n          } else if (this.redirectsEnabled === 'none') {\n            this.redirectsEnabled = 'tags_only';\n          }\n        } else {\n          if (this.redirectsEnabled === 'tags_only') {\n            this.redirectsEnabled = 'none';\n          } else {\n            this.redirectsEnabled = 'discussions_only';\n          }\n        }\n        this.hasChanges = true;\n      }\n    }, [m(\"b\", null, app.translator.trans('v17development-flarum-blog.admin.settings.redirect_tags_label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.redirect_tags_text'))])]), FieldSet.component({\n      label: app.translator.trans('v17development-flarum-blog.admin.settings.default_article_image_label')\n    }, [m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('v17development-flarum-blog.admin.settings.default_article_image_text')), UploadImageButton.component({\n      name: 'blog_default_image'\n    })]), m(Button, {\n      loading: this.isSaving,\n      className: 'Button Button--primary',\n      onclick: () => this.save(),\n      disabled: !this.hasChanges\n    }, app.translator.trans('core.admin.settings.submit_button'))));\n  }\n\n  /**\n   * Save data\n   */\n  save() {\n    this.isSaving = true;\n    saveSettings({\n      blog_add_sidebar_nav: this.addSidebarNav,\n      blog_redirects_enabled: this.redirectsEnabled,\n      blog_hide_tags: this.hideTagsInList,\n      blog_requires_review: this.requiresReviewOnPost,\n      blog_allow_comments: this.allowComments,\n      blog_category_hierarchy: this.addCategoryHierarchy,\n      blog_filter_discussion_list: this.hideOnDiscussionList,\n      blog_featured_count: this.featuredCount,\n      blog_add_hero: this.blogAddHero\n    }).then(() => {\n      this.hasChanges = false;\n\n      // Show saved message\n      app.alerts.show(Alert, {\n        type: 'success'\n      }, app.translator.trans('core.admin.settings.saved_message'));\n    }).catch(() => {}).then(() => {\n      this.isSaving = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'admin/pages/BlogSettings', BlogSettings);","import { extend } from 'flarum/common/extend';\nimport BasicsPage from 'flarum/admin/components/BasicsPage';\nimport PermissionGrid from 'flarum/admin/components/PermissionGrid';\nimport BlogSettings from './pages/BlogSettings';\napp.initializers.add('vadkuz-flarum2-blog', () => {\n  // Register extension settings page\n  app.extensionData.for('vadkuz-flarum2-blog').registerPage(BlogSettings);\n  app.extensionData.for('vadkuz-flarum2-blog').registerPermission({\n    icon: 'fas fa-pencil-alt',\n    label: app.translator.trans('v17development-flarum-blog.admin.permissions.write_articles'),\n    permission: 'blog.writeArticles'\n  }, 'blog', 90).registerPermission({\n    icon: 'far fa-star',\n    label: app.translator.trans('v17development-flarum-blog.admin.permissions.auto_approve_posts'),\n    permission: 'blog.autoApprovePosts'\n  }, 'blog', 90).registerPermission({\n    icon: 'far fa-thumbs-up',\n    label: app.translator.trans('v17development-flarum-blog.admin.permissions.approve_posts'),\n    permission: 'blog.canApprovePosts'\n  }, 'blog', 90);\n\n  // Add addPermissions\n  extend(PermissionGrid.prototype, 'permissionItems', function (items) {\n    // Add blog permissions\n    items.add('blog', {\n      label: app.translator.trans('v17development-flarum-blog.admin.blog'),\n      children: this.attrs.extensionId ? app.extensionData.getExtensionPermissions(this.extensionId, 'blog').toArray() : app.extensionData.getAllExtensionPermissions('blog').toArray()\n    }, 80);\n  });\n  extend(BasicsPage.prototype, 'homePageItems', items => {\n    items.add('blog', {\n      path: '/blog',\n      label: app.translator.trans('v17development-flarum-blog.admin.blog')\n    });\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","SelectCategoriesModal","oninit","vnode","super","this","blogCategoriesOriginal","app","data","settings","blog_tags","split","blogCategories","isSaving","hasChanges","title","className","content","m","href","forum","attribute","target","width","store","all","length","colspan","map","parent","toggleTag","currentIndex","indexOf","id","splice","push","icon","onclick","name","state","onchange","style","type","loading","onsubmit","e","preventDefault","hide","validBlogTags","tagId","getById","join","then","alerts","show","translator","trans","catch","add","BlogSettings","attrs","_app$data$settings$bl","_app$data$settings$bl2","_app$data$settings$bl3","_app$data$settings$bl4","_app$data$settings$bl5","_app$data$settings$bl6","_app$data$settings$bl7","_app$data$settings$bl8","_app$data$settings$bl9","redirectsEnabled","hideTagsInList","allowComments","hideOnDiscussionList","requiresReviewOnPost","addCategoryHierarchy","addSidebarNav","featuredCount","blogAddHero","concat","blogCategoriesCount","count","label","val","class","oninput","placeholder","save","disabled","blog_add_sidebar_nav","blog_redirects_enabled","blog_hide_tags","blog_requires_review","blog_allow_comments","blog_category_hierarchy","blog_filter_discussion_list","blog_featured_count","blog_add_hero","redraw","initializers","extensionData","for","registerPage","registerPermission","permission","extend","items","children","extensionId","getExtensionPermissions","toArray","getAllExtensionPermissions","path"],"sourceRoot":""}