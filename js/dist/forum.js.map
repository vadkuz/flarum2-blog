{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@vadkuz/flarum2-blog/webpack/bootstrap","webpack://@vadkuz/flarum2-blog/webpack/runtime/compat get default export","webpack://@vadkuz/flarum2-blog/webpack/runtime/define property getters","webpack://@vadkuz/flarum2-blog/webpack/runtime/hasOwnProperty shorthand","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('flarum-tags', 'common/models/Tag')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/models/Discussion')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/components/IndexPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/BlogCategories.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/components/IndexSidebar')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/SelectDropdown')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/ForumNav.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/helpers/humanTime')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/BlogOverviewItem.tsx","webpack://@vadkuz/flarum2-blog/./src/forum/components/FeaturedBlogItem.tsx","webpack://@vadkuz/flarum2-blog/./src/forum/pages/BlogOverview.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/components/DiscussionPage')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/utils/mixin')\"","webpack://@vadkuz/flarum2-blog/./src/common/Models/BlogMeta.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('flarum-tags', 'forum/components/TagsPage')\"","webpack://@vadkuz/flarum2-blog/./src/forum/utils/extendTagOverview.js","webpack://@vadkuz/flarum2-blog/./src/forum/utils/discussionRouting.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/BlogItemSidebar/BlogAuthor.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/TextEditor')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/Composer/ComposerPreview.js","webpack://@vadkuz/flarum2-blog/./src/forum/components/Composer/Composer.js","webpack://@vadkuz/flarum2-blog/./src/forum/pages/BlogComposer.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@vadkuz/flarum2-blog/./src/forum/utils/addSidebarNav.js","webpack://@vadkuz/flarum2-blog/./src/common/translations/ru.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/components/CommentPost')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/states/PostStreamState')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'forum/utils/DiscussionControls')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/BlogPostController.js","webpack://@vadkuz/flarum2-blog/./src/forum/components/BlogItemSidebar/BlogItemSidebar.js","webpack://@vadkuz/flarum2-blog/external root \"flarum.reg.get('core', 'common/helpers/fullTime')\"","webpack://@vadkuz/flarum2-blog/./src/forum/components/ArticleSubscription.js","webpack://@vadkuz/flarum2-blog/./src/forum/pages/BlogItem.js","webpack://@vadkuz/flarum2-blog/./src/forum/index.ts","webpack://@vadkuz/flarum2-blog/./src/forum/utils/redirector.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('flarum-tags', 'common/models/Tag');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Discussion');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Page');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Link');","import Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nexport default class BlogCategories extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.blogCategories = app.forum.attribute('blogTags');\n  }\n  view() {\n    return m(\"div\", {\n      className: \"BlogCategories BlogSideWidget\"\n    }, m(\"h3\", null, app.translator.trans('vadkuz-flarum2-blog.forum.categories')), this.blogCategories && this.blogCategories.map(tagId => {\n      const tag = app.store.getById('tags', tagId);\n      if (!tag) return null;\n      const tags = [];\n      let showSubTags = this.blogCategories.length === 1 || tag.slug() === m.route.param('slug');\n\n      // Add tags\n      app.store.all('tags').forEach(_tag => {\n        if (_tag.isChild() && _tag.parent() === tag) {\n          if (_tag.slug() === m.route.param('slug')) {\n            showSubTags = true;\n          }\n          tags.push(this.categoryItem(_tag));\n        }\n      });\n      return showSubTags ? [this.categoryItem(tag), ...tags] : this.categoryItem(tag);\n    }));\n  }\n\n  // Category item\n  categoryItem(tag) {\n    return m(Link, {\n      href: app.route('blogCategory', {\n        slug: tag.slug()\n      }),\n      className: \"BlogSideWidget-item BlogSideWidget-item-\".concat(tag.id(), \" \").concat(tag.isChild() && app.forum.attribute('blogCategoryHierarchy') == true ? 'BlogSideWidget-item-child' : '')\n    }, m(\"span\", {\n      className: tag.icon() === '' ? 'BlogSideWidget-item-colored' : '',\n      style: {\n        backgroundColor: tag.icon() === '' ? tag.color() : null\n      }\n    }, m(\"i\", {\n      className: tag.icon()\n    })), tag.name());\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/BlogCategories', BlogCategories);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexSidebar');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/SelectDropdown');","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nexport default class ForumNav extends Component {\n  view() {\n    return m(\"div\", {\n      className: \"BlogForumNav BlogSideWidget\"\n    }, m(\"h3\", null, app.translator.trans('vadkuz-flarum2-blog.forum.forum_nav')), m(\"nav\", {\n      className: \"IndexPage-nav sideNav\"\n    }, m(SelectDropdown, {\n      buttonClassName: \"Button\",\n      className: \"App-titleControl\"\n    }, this.navItems().toArray())));\n  }\n  navItems() {\n    return IndexSidebar.prototype.navItems();\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/ForumNav', ForumNav);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Tooltip');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/humanTime');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/classList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","import Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Icon from 'flarum/common/components/Icon';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport app from 'flarum/forum/app';\nexport default class BlogOverviewItem extends Component {\n  titleItems() {\n    var _article$blogMeta, _article$blogMeta$isP, _article$blogMeta2, _article$blogMeta2$is;\n    const {\n      article\n    } = this.attrs;\n    const items = new ItemList();\n    items.add('title', m('[', null, article.title()), 100);\n    if ((_article$blogMeta = article.blogMeta()) != null && (_article$blogMeta$isP = _article$blogMeta.isPendingReview) != null && _article$blogMeta$isP.call(_article$blogMeta) || article.isHidden()) {\n      items.add('hidden', m(Icon, {\n        name: \"fas fa-eye-slash\",\n        className: \"BlogList-item-hidden\"\n      }), 80);\n    }\n    if ((_article$blogMeta2 = article.blogMeta()) != null && (_article$blogMeta2$is = _article$blogMeta2.isPendingReview) != null && _article$blogMeta2$is.call(_article$blogMeta2)) {\n      items.add('pendingReview', m(Tooltip, {\n        text: app.translator.trans('vadkuz-flarum2-blog.forum.review_article.pending_review')\n      }, m(Icon, {\n        name: \"far fa-clock\",\n        className: \"BlogList-item-pendingReview\"\n      })), 40);\n    }\n    return items;\n  }\n  dataItems() {\n    var _article$user, _article$user$display;\n    const {\n      article\n    } = this.attrs;\n    const items = new ItemList();\n    items.add('createdAt', m(\"span\", {\n      class: \"BlogList-item-details-createdAt\"\n    }, m(Icon, {\n      name: \"far fa-clock\"\n    }), \" \", humanTime(article.createdAt())), 100);\n    items.add('author', m(\"span\", {\n      class: \"BlogList-item-details-author\"\n    }, m(Icon, {\n      name: \"far fa-user\"\n    }), \" \", ((_article$user = article.user()) == null || (_article$user$display = _article$user.displayName) == null ? void 0 : _article$user$display.call(_article$user)) || app.translator.trans('core.lib.username.deleted_text')), 80);\n    items.add('replies', m(\"span\", {\n      class: \"BlogList-item-details-replies\"\n    }, m(Icon, {\n      name: \"far fa-comment\"\n    }), \" \", (article.commentCount() || 1) - 1), 60);\n    return items;\n  }\n  contentItems() {\n    var _article$blogMeta3, _article$blogMeta3$su;\n    const {\n      article\n    } = this.attrs;\n    const summary = ((_article$blogMeta3 = article.blogMeta()) == null || (_article$blogMeta3$su = _article$blogMeta3.summary) == null ? void 0 : _article$blogMeta3$su.call(_article$blogMeta3)) || '';\n    const items = new ItemList();\n    items.add('title', m(\"h4\", null, this.titleItems().toArray()), 100);\n    if (summary) items.add('summary', m(\"p\", null, summary), 80);\n    items.add('data', m(\"div\", {\n      class: \"data\"\n    }, this.dataItems().toArray()), 60);\n    return items;\n  }\n  getImage() {\n    var _article$blogMeta4, _article$blogMeta4$fe;\n    const {\n      article,\n      defaultImage\n    } = this.attrs;\n    return (_article$blogMeta4 = article.blogMeta()) != null && (_article$blogMeta4$fe = _article$blogMeta4.featuredImage) != null && _article$blogMeta4$fe.call(_article$blogMeta4) ? \"url(\".concat(article.blogMeta().featuredImage(), \")\") : defaultImage;\n  }\n  view(vnode) {\n    var _article$blogMeta5, _article$blogMeta5$is;\n    const {\n      article,\n      defaultImage\n    } = this.attrs;\n    const blogImage = this.getImage();\n    const isSized = (_article$blogMeta5 = article.blogMeta()) == null || (_article$blogMeta5$is = _article$blogMeta5.isSized) == null ? void 0 : _article$blogMeta5$is.call(_article$blogMeta5);\n    return m(Link, {\n      href: app.route('blogArticle', {\n        id: \"\".concat(article.slug())\n      }),\n      className: classList('BlogList-item', {\n        'BlogList-item-sized': isSized,\n        'BlogList-item-default': !isSized\n      }, article.tags().map(tag => \"BlogList-item-category-\".concat(tag.id())))\n    }, m(\"div\", {\n      class: classList('BlogList-item-photo', {\n        'FlarumBlog-default-image': blogImage === defaultImage\n      }),\n      style: {\n        backgroundImage: blogImage\n      }\n    }), m(\"div\", {\n      class: \"BlogList-item-content\"\n    }, this.contentItems().toArray()));\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/BlogOverviewItem', BlogOverviewItem);","import Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Icon from 'flarum/common/components/Icon';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport classList from 'flarum/common/utils/classList';\nimport app from 'flarum/forum/app';\nexport default class FeaturedBlogItem extends Component {\n  topItems() {\n    var _article$tags, _article$isSticky, _article$blogMeta, _article$blogMeta$isP, _article$blogMeta2, _article$blogMeta2$is;\n    const {\n      article\n    } = this.attrs;\n    const items = new ItemList();\n    items.add('tags', m(\"span\", {\n      class: \"BlogFeatured-list-item-tags\"\n    }, (_article$tags = article.tags()) == null ? void 0 : _article$tags.map(tag => m(\"span\", {\n      class: \"dataItem\"\n    }, tag.name()))), 100);\n\n    // Sticky is an optional dependency, so we can't\n    // assume method existence.\n    if ((_article$isSticky = article.isSticky) != null && _article$isSticky.call(article)) {\n      items.add('sticky', m(\"span\", {\n        class: \"BlogFeatured-list-item-isSticky dataItem\"\n      }, m(Icon, {\n        name: \"fas fa-thumbtack\"\n      })), 80);\n    }\n    if ((_article$blogMeta = article.blogMeta()) != null && (_article$blogMeta$isP = _article$blogMeta.isPendingReview) != null && _article$blogMeta$isP.call(_article$blogMeta) || article.isHidden()) {\n      items.add('hidden', m(\"span\", {\n        class: \"BlogFeatured-list-item-isHidden dataItem\"\n      }, m(Icon, {\n        name: \"fas fa-eye-slash\"\n      })), 60);\n    }\n    if ((_article$blogMeta2 = article.blogMeta()) != null && (_article$blogMeta2$is = _article$blogMeta2.isPendingReview) != null && _article$blogMeta2$is.call(_article$blogMeta2)) {\n      items.add('pendingReview', m(Tooltip, {\n        text: app.translator.trans('vadkuz-flarum2-blog.forum.review_article.pending_review'),\n        position: \"bottom\"\n      }, m(\"span\", {\n        class: \"BlogFeatured-list-item-pendingReview dataItem\"\n      }, m(Icon, {\n        name: \"far fa-clock\"\n      }), \" \", app.translator.trans('vadkuz-flarum2-blog.forum.review_article.pending_review_title'))), 40);\n    }\n    return items;\n  }\n  dataItems() {\n    var _article$user;\n    const {\n      article\n    } = this.attrs;\n    const items = new ItemList();\n    items.add('createdAt', m(\"span\", {\n      class: \"BlogFeatured-list-item-details-createdAt\"\n    }, m(Icon, {\n      name: \"far fa-clock\"\n    }), \" \", humanTime(article.createdAt())), 100);\n    items.add('author', m(\"span\", {\n      class: \"BlogFeatured-list-item-details-author\"\n    }, m(Icon, {\n      name: \"far fa-user\"\n    }), \" \", ((_article$user = article.user()) == null ? void 0 : _article$user.displayName()) || app.translator.trans('core.lib.username.deleted_text')), 80);\n    items.add('replies', m(\"span\", {\n      class: \"BlogFeatured-list-item-details-replies\"\n    }, m(Icon, {\n      name: \"far fa-comment\"\n    }), \" \", article.commentCount() - 1), 60);\n    return items;\n  }\n  view(vnode) {\n    var _article$blogMeta3, _article$blogMeta3$fe;\n    const {\n      article,\n      defaultImage\n    } = this.attrs;\n    const blogImage = (_article$blogMeta3 = article.blogMeta()) != null && (_article$blogMeta3$fe = _article$blogMeta3.featuredImage) != null && _article$blogMeta3$fe.call(_article$blogMeta3) ? \"url(\".concat(article.blogMeta().featuredImage(), \")\") : defaultImage;\n    return m(Link, {\n      href: app.route('blogArticle', {\n        id: \"\".concat(article.slug())\n      }),\n      className: classList('BlogFeatured-list-item', article.tags().map(tag => \"BlogFeatured-list-item-category-\".concat(tag.id())), 'FlarumBlog-default-image'),\n      style: {\n        backgroundImage: blogImage\n      }\n    }, m(\"div\", {\n      class: \"BlogFeatured-list-item-top\"\n    }, this.topItems().toArray()), m(\"div\", {\n      className: 'BlogFeatured-list-item-details'\n    }, m(\"h4\", null, article.title()), m(\"div\", {\n      className: 'data'\n    }, this.dataItems().toArray())));\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/FeaturedBlogItem', FeaturedBlogItem);","import app from 'flarum/forum/app';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Page from 'flarum/common/components/Page';\nimport Button from 'flarum/common/components/Button';\nimport BlogCategories from '../components/BlogCategories';\nimport Link from 'flarum/common/components/Link';\nimport ForumNav from '../components/ForumNav';\nimport BlogOverviewItem from '../components/BlogOverviewItem';\nimport FeaturedBlogItem from '../components/FeaturedBlogItem';\nexport default class BlogOverview extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.setTitle(app.translator.trans('vadkuz-flarum2-blog.forum.blog'));\n    this.bodyClass = 'BlogOverviewPage';\n    this.isLoading = true;\n    this.featuredPosts = [];\n    this.posts = [];\n    this.hasMore = null;\n    this.isLoadingMore = false;\n    this.languages = app.store.all('discussion-languages');\n    this.currentSelectedLanguage = m.route.param('lang') ? m.route.param('lang') : app.translator.formatter.locale;\n\n    // Send history push\n    app.history.push('blog');\n    this.loadBlogOverview();\n    this.featuredCount = parseInt(app.forum.attribute('blogFeaturedCount'));\n    this.showCategories = true;\n    this.showForumNav = true;\n  }\n\n  // Load blog overview\n  loadBlogOverview() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      this.reloadData();\n    }\n    m.redraw();\n  }\n  reloadData() {\n    const filter = {\n      blog: '1'\n    };\n    if (m.route.param('slug')) {\n      filter.tag = m.route.param('slug');\n    }\n    if (this.languages !== null && this.languages.length >= 1) {\n      filter.language = this.currentSelectedLanguage;\n    }\n    app.store.find('discussions', {\n      filter,\n      sort: '-createdAt'\n    }).then(this.show.bind(this)).catch(() => {\n      m.redraw();\n    });\n  }\n\n  // Show blog posts\n  show(articles) {\n    if (articles.length === 0) {\n      this.isLoading = false;\n      m.redraw();\n      return;\n    }\n\n    // Set pagination\n    this.hasMore = articles.payload.links && articles.payload.links.next ? articles.payload.links.next : null;\n    this.featuredPosts = articles.slice(0, this.featuredCount);\n    this.posts = articles.length > this.featuredCount ? articles.slice(this.featuredCount, articles.length) : [];\n    this.isLoading = false;\n    m.redraw();\n  }\n\n  // Load more blog posts\n  loadMore() {\n    this.isLoadingMore = true;\n    app.store.find(this.hasMore.replace(app.forum.attribute('apiUrl'), '')).then(data => {\n      data.map(article => this.posts.push(article));\n\n      // Update hasmore button\n      this.hasMore = data.payload.links && data.payload.links.next ? data.payload.links.next : null;\n    }).catch(() => {}).then(() => {\n      this.isLoadingMore = false;\n      m.redraw();\n    });\n  }\n  title() {\n    if (!m.route.param('slug')) {\n      return m(\"h2\", null, app.translator.trans('vadkuz-flarum2-blog.forum.recent_posts'));\n    }\n    const tag = app.store.all('tags').filter(tag => tag.slug() === m.route.param('slug'));\n    return m(\"h2\", null, tag && tag[0] && tag[0].name(), m(\"small\", null, ' ', \"- \", m(Link, {\n      href: app.route('blog')\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.return_to_overview'))));\n  }\n  view() {\n    const defaultImage = app.forum.attribute('blogDefaultImage') ? \"url(\".concat(app.forum.attribute('baseUrl') + '/assets/' + app.forum.attribute('blogDefaultImage'), \")\") : null;\n    let LanguageDropdown;\n    const discussionLanguage = flarum.extensions['fof-discussion-language'];\n    if (discussionLanguage && discussionLanguage.components && discussionLanguage.components.LanguageDropdown) {\n      LanguageDropdown = discussionLanguage.components.LanguageDropdown;\n    }\n    return [app.forum.attribute('blogAddHero') == true && IndexPage.prototype.hero(), m(\"div\", {\n      className: 'FlarumBlogOverview'\n    }, m(\"div\", {\n      className: 'container'\n    }, m(\"div\", {\n      className: 'BlogFeatured'\n    }, m(\"div\", {\n      className: 'BlogOverviewButtons'\n    }, app.forum.attribute('canWriteBlogPosts') && m(Button, {\n      className: 'Button',\n      onclick: () => this.newArticle(),\n      icon: 'fas fa-pencil-alt'\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.compose.write_article')), this.languages !== null && this.languages.length >= 1 && m(LanguageDropdown, {\n      selected: this.currentSelectedLanguage,\n      onclick: language => {\n        if (typeof language !== 'string') return;\n        this.currentSelectedLanguage = language;\n        m.route.set(document.location.pathname, {\n          lang: language\n        });\n        this.reloadData();\n      }\n    })), this.title(), m(\"div\", {\n      style: {\n        clear: 'both'\n      }\n    }), m(\"div\", {\n      class: \"BlogFeatured-list\"\n    }, this.isLoading && [...new Array(this.featuredCount).fill(undefined)].map(() => m(\"div\", {\n      class: \"BlogFeatured-list-item BlogFeatured-list-item-ghost\"\n    }, m(\"div\", {\n      class: \"BlogFeatured-list-item-details\"\n    }, m(\"h4\", null, \"\\xA0\"), m(\"div\", {\n      class: \"data\"\n    }, m(\"span\", null, m(\"i\", {\n      class: \"far fa-wave\"\n    })))))), !this.isLoading && this.featuredPosts.length >= 0 && this.featuredPosts.map(article => m(FeaturedBlogItem, {\n      article: article,\n      defaultImage: defaultImage\n    })))), m(\"div\", {\n      className: 'BlogScrubber'\n    }, m(\"div\", {\n      className: 'BlogList'\n    }, this.isLoading && [false, false, true, false].map(state => {\n      return m(\"div\", {\n        className: \"BlogList-item BlogList-item-\".concat(state === true ? 'sized' : 'default', \" BlogList-item-ghost\")\n      }, m(\"div\", {\n        className: 'BlogList-item-photo FlarumBlog-default-image'\n      }), m(\"div\", {\n        className: 'BlogList-item-content'\n      }, m(\"h4\", null, \"\\xA0\"), m(\"p\", null, \"\\xA0\"), m(\"div\", {\n        className: 'data'\n      }, m(\"span\", null, m(\"i\", {\n        className: 'far fa-wave'\n      })))));\n    }), !this.isLoading && this.posts.length >= 1 && this.posts.map(article => m(BlogOverviewItem, {\n      article: article,\n      defaultImage: defaultImage\n    })), !this.isLoading && this.featuredPosts.length > 0 && this.hasMore === null && m(\"p\", {\n      className: 'FlarumBlog-reached-end'\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.no_more_posts')), !this.isLoading && this.featuredPosts.length === 0 && this.posts.length === 0 && m(\"p\", {\n      className: 'FlarumBlog-reached-end'\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.category_empty')), !this.isLoading && this.hasMore !== null && m(\"div\", {\n      className: 'FlarumBlog-reached-load-more'\n    }, m(Button, {\n      className: 'Button',\n      onclick: () => this.loadMore(),\n      icon: 'fas fa-chevron-down',\n      loading: this.isLoadingMore\n    }, app.translator.trans('core.forum.discussion_list.load_more_button')))), m(\"div\", {\n      className: 'Sidebar'\n    }, this.showCategories && m(BlogCategories, null), this.showForumNav && m(ForumNav, null)))))];\n  }\n  newArticle() {\n    let tags = [];\n\n    // Get current category\n    const currentCategory = app.store.getBy('tags', 'slug', m.route.param('slug'));\n    if (currentCategory) {\n      tags.push(currentCategory);\n    }\n\n    // Redirect to the composer\n    m.route.set(app.route('blogComposer', {\n      tags: tags.map(tag => tag.id()).join(),\n      lang: this.languages.length > 0 ? this.currentSelectedLanguage : undefined\n    }));\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/pages/BlogOverview', BlogOverview);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/DiscussionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/mixin');","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\nexport default class BlogMeta extends mixin(Model, {\n  discussion: Model.hasOne('discussion'),\n  featuredImage: Model.attribute('featuredImage'),\n  summary: Model.attribute('summary'),\n  isFeatured: Model.attribute('isFeatured'),\n  isSized: Model.attribute('isSized'),\n  isPendingReview: Model.attribute('isPendingReview')\n}) {}\nflarum.reg.add('vadkuz-flarum2-blog', 'common/Models/BlogMeta', BlogMeta);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('flarum-tags', 'forum/components/TagsPage');","import { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport TagsPage from 'ext:flarum/tags/forum/components/TagsPage';\nexport default function extendTagOverview() {\n  extend(TagsPage.prototype, 'view', function (markup) {\n    // Pending xhr to load all tags, throw back loading indicator.\n    if (this.loading) {\n      return markup;\n    }\n    if (app.forum.attribute('blogHideTags') == false) return markup;\n\n    // Get blog tag ID's\n    const blogTags = app.forum.attribute('blogTags') || [];\n    const tag_tiles_parent = findChild(markup, 'TagsPage-content', true);\n    const tag_tiles = tag_tiles_parent == null ? void 0 : tag_tiles_parent.children[0];\n    if (!tag_tiles_parent || !tag_tiles) return markup;\n\n    // Map through the tiles and remove tiles that are part of the blog\n    tag_tiles.children = tag_tiles.children.map((tile, i) => {\n      return blogTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\n    });\n    return markup;\n  });\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    if (app.forum.attribute('blogHideTags') == false) return items;\n    const blogTags = app.forum.attribute('blogTags') || [];\n    blogTags.forEach(id => {\n      items.remove(\"tag\".concat(id));\n    });\n    return items;\n  });\n}\nfunction findChild(parent, childClass, recursive, maxDepth, depth) {\n  if (recursive === void 0) {\n    recursive = false;\n  }\n  if (maxDepth === void 0) {\n    maxDepth = 50;\n  }\n  if (depth === void 0) {\n    depth = 0;\n  }\n  const children = getChildren(parent);\n  let child = null;\n  for (let i = 0; i < children.length; i++) {\n    var _children$i;\n    const childClassName = ((_children$i = children[i]) == null || (_children$i = _children$i.attrs) == null ? void 0 : _children$i.className) || '';\n    if (childClassName.includes(childClass)) {\n      child = children[i];\n      break;\n    }\n  }\n\n  // Recursive search\n  if (recursive && !child && depth < maxDepth) {\n    for (let subParent of children) {\n      const subChild = findChild(subParent, childClass, true, maxDepth, depth + 1);\n      if (subChild) {\n        return subChild;\n      }\n    }\n  }\n  return child;\n}\nfunction getChildren(parent) {\n  if (Array.isArray(parent)) {\n    return parent;\n  }\n  const children = (parent == null ? void 0 : parent.children) || [];\n  if (!Array.isArray(children)) {\n    return [];\n  }\n  return children;\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/utils/extendTagOverview', extendTagOverview);","export default function () {\n  // Save the original function before we override it\n  const original_discussion_route = app.route.discussion;\n  const isBlogTag = (tag, blogTags) => {\n    var _tag$id, _tag$parent, _tag$parent$id, _tag$parent2;\n    const tagId = parseInt((_tag$id = tag.id) == null ? void 0 : _tag$id.call(tag), 10);\n    const parentId = (_tag$parent = tag.parent) != null && _tag$parent.call(tag) ? parseInt((_tag$parent$id = (_tag$parent2 = tag.parent()).id) == null ? void 0 : _tag$parent$id.call(_tag$parent2), 10) : null;\n    return blogTags.includes(tagId) || parentId !== null && blogTags.includes(parentId);\n  };\n\n  /**\n   * Generate a URL to a discussion OR a Blog Article.\n   *\n   * CORE_CODE_OVERRIDE: This overrides the standard function from flarum/core.\n   * The code is inspired from js/src/forum/routes.js and now handles different types of discussions.\n   * It will try to keep the original function executed if the discussion being\n   * processed isn't a blog article.\n   *\n   * @param {Discussion} discussion\n   * @param {Integer} [near]\n   * @return {String}\n   */\n  app.route.discussion = (discussion, near) => {\n    const discussionRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'discussions_only';\n    let shouldRedirect = false;\n    if (discussionRedirectEnabled && discussion.tags().length > 0) {\n      const blogTags = (app.forum.attribute('blogTags') || []).map(tagId => parseInt(tagId, 10)).filter(tagId => Number.isInteger(tagId));\n      const foundTags = discussion.tags().filter(tag => {\n        return isBlogTag(tag, blogTags);\n      });\n      if (foundTags.length > 0) {\n        shouldRedirect = true;\n      }\n    }\n    if (shouldRedirect) {\n      return discussion.lastReadPostNumber() > 1 ? app.route('blogArticle.near', {\n        id: discussion.slug(),\n        near: discussion.lastReadPostNumber()\n      }) : app.route('blogArticle', {\n        id: discussion.slug()\n      });\n    } else {\n      return original_discussion_route(discussion, near);\n    }\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/listItems');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Avatar');","import Component from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Avatar from 'flarum/common/components/Avatar';\nimport Link from 'flarum/common/components/Link';\nexport default class BlogAuthor extends Component {\n  view() {\n    const author = !this.attrs.loading ? this.attrs.article ? this.attrs.article.user() : this.attrs.user : null;\n    return m(\"div\", {\n      className: 'FlarumBlog-Article-Author'\n    }, m(\"div\", {\n      className: \"FlarumBlog-Article-Author-background \".concat(this.attrs.loading ? 'FlarumBlog-Author-Ghost' : ''),\n      style: {\n        backgroundColor: author && author.color() ? author.color() : null\n      }\n    }), m(\"div\", {\n      className: 'FlarumBlog-Article-Author-Avatar'\n    }, author ? m(Link, {\n      href: app.route('user', {\n        username: author.username()\n      })\n    }, m(Avatar, {\n      user: author\n    })) : m(\"span\", {\n      className: 'Avatar FlarumBlog-Author-Ghost'\n    })), author && m(\"div\", {\n      className: 'FlarumBlog-Article-Author-Info'\n    }, m(Link, {\n      href: app.route('user', {\n        username: author.username()\n      }),\n      className: 'FlarumBlog-Article-Author-Name'\n    }, author.displayName()), m(\"p\", {\n      className: 'FlarumBlog-Article-Author-Bio'\n    }, author.bio && author.bio()), m(\"ul\", {\n      className: 'FlarumBlog-Article-Author-Extended'\n    }, listItems(this.items().toArray()))), this.attrs.loading && m(\"div\", null, m(\"span\", {\n      className: 'FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost'\n    }, \"\\xA0\"), m(\"p\", {\n      className: 'FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost'\n    }, \"\\xA0\"), m(\"p\", {\n      className: 'FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost'\n    }, \"\\xA0\"), m(\"p\", {\n      className: 'FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost'\n    }, \"\\xA0\")));\n  }\n  items() {\n    return new ItemList();\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/BlogItemSidebar/BlogAuthor', BlogAuthor);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nexport default class RenameArticleModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.article = this.attrs.article;\n    this.name = Stream(this.article.title() || '');\n    this.redirect = this.attrs.redirect;\n  }\n  className() {\n    return 'Modal--small Support-Modal';\n  }\n  title() {\n    return app.translator.trans('vadkuz-flarum2-blog.forum.tools.rename_article');\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"form\", {\n      className: \"Form\",\n      onsubmit: this.onsubmit.bind(this)\n    }, this.fields().toArray()));\n  }\n  fields() {\n    const items = new ItemList();\n    items.add('name', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('vadkuz-flarum2-blog.forum.article.title'), \":\"), m(\"input\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('vadkuz-flarum2-blog.forum.article.title'),\n      bidi: this.name\n    })), 50);\n    items.add('submit', m(\"div\", {\n      className: \"Form-group\"\n    }, Button.component({\n      type: 'submit',\n      className: 'Button Button--primary SupportModal-save',\n      loading: this.loading\n    }, app.translator.trans('core.forum.composer_edit.submit_button'))), -10);\n    return items;\n  }\n  submitData() {\n    return {\n      title: this.name()\n    };\n  }\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n\n    // Do not save\n    if (this.attrs.onChange) {\n      this.attrs.onChange(this.name());\n      this.hide();\n      return;\n    }\n    this.article.save({\n      title: this.name()\n    }).then(() => {\n      this.hide();\n\n      // Redirect\n      if (this.redirect) {\n        const url = \"/blog/\".concat(this.article.slug());\n        m.route.set(url, true);\n        window.history.replaceState(null, document.title, url);\n      }\n    }, response => {\n      this.loading = false;\n      this.handleErrors(response);\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/Modals/RenameArticleModal', RenameArticleModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nimport Switch from 'flarum/common/components/Switch';\nexport default class BlogPostSettingsModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    if (this.attrs.article) {\n      this.meta = this.attrs.article && this.attrs.article.blogMeta() ? this.attrs.article.blogMeta() : app.store.createRecord('blogMeta');\n    } else {\n      this.meta = this.attrs.meta ? this.attrs.meta : app.store.createRecord('blogMeta');\n    }\n    this.isNew = !this.meta.exists;\n    this.summary = Stream(this.meta.summary() || '');\n    this.featuredImage = Stream(this.meta.featuredImage() || '');\n    this.isFeatured = Stream(this.meta.isFeatured() || false);\n    this.isSized = Stream(this.meta.isSized() || false);\n    this.isPendingReview = Stream(this.meta.isPendingReview() || false);\n    this.fofUploadState = {\n      loading: false,\n      error: false,\n      FileManagerModal: null,\n      uploader: null\n    };\n  }\n  className() {\n    return 'Modal--small Support-Modal';\n  }\n  title() {\n    return app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.title');\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"form\", {\n      className: \"Form\",\n      onsubmit: this.onsubmit.bind(this)\n    }, this.fields().toArray()));\n  }\n  canUseFoFUpload() {\n    return Boolean(app.forum.attribute('fof-upload.canUpload'));\n  }\n  findUploadedFile(fileId) {\n    if (!fileId) return null;\n    return app.store.getById('files', fileId) || app.store.getById('shared-files', fileId) || null;\n  }\n  getUploadedFileUrl(file) {\n    var _file$data;\n    if (!file) return null;\n    if (typeof file.url === 'function') return file.url();\n    return ((_file$data = file.data) == null || (_file$data = _file$data.attributes) == null ? void 0 : _file$data.url) || null;\n  }\n  moduleDefault(module) {\n    return module && module.default ? module.default : module;\n  }\n  async resolveFoFUploadModules() {\n    const directFileManagerModal = flarum.reg.get('fof-upload', 'forum/components/FileManagerModal');\n    const directUploader = flarum.reg.get('fof-upload', 'forum/handler/Uploader');\n    if (directFileManagerModal && directUploader) {\n      return {\n        FileManagerModal: this.moduleDefault(directFileManagerModal),\n        Uploader: this.moduleDefault(directUploader)\n      };\n    }\n    const [fileManagerModule, uploaderModule] = await Promise.all([flarum.reg.asyncModuleImport('ext:fof/upload/forum/components/FileManagerModal'), flarum.reg.asyncModuleImport('ext:fof/upload/forum/handler/Uploader')]);\n    return {\n      FileManagerModal: this.moduleDefault(fileManagerModule),\n      Uploader: this.moduleDefault(uploaderModule)\n    };\n  }\n  async openFoFUploadModal() {\n    var _this = this;\n    if (this.fofUploadState.loading) return;\n    try {\n      if (!this.fofUploadState.FileManagerModal || !this.fofUploadState.uploader) {\n        this.fofUploadState.loading = true;\n        this.fofUploadState.error = false;\n        m.redraw();\n        const {\n          FileManagerModal,\n          Uploader\n        } = await this.resolveFoFUploadModules();\n        this.fofUploadState.FileManagerModal = FileManagerModal;\n        this.fofUploadState.uploader = new Uploader();\n      }\n      app.modal.show(this.fofUploadState.FileManagerModal, {\n        uploader: this.fofUploadState.uploader,\n        onSelect: function (selectedFileIds) {\n          if (selectedFileIds === void 0) {\n            selectedFileIds = [];\n          }\n          const selectedFile = _this.findUploadedFile(selectedFileIds[0]);\n          const selectedFileUrl = _this.getUploadedFileUrl(selectedFile);\n          if (selectedFileUrl) {\n            _this.featuredImage(selectedFileUrl);\n          }\n        }\n      }, true);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('[vadkuz/flarum2-blog] FoF Upload integration failed', error);\n      this.fofUploadState.error = true;\n      app.alerts.show({\n        type: 'error'\n      }, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.image.upload_unavailable'));\n    } finally {\n      this.fofUploadState.loading = false;\n      m.redraw();\n    }\n  }\n  fields() {\n    const items = new ItemList();\n    items.add('summary', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.summary.title'), \":\"), m(\"textarea\", {\n      className: \"FormControl\",\n      style: {\n        maxWidth: '100%',\n        minWidth: '100%',\n        width: '100%',\n        minHeight: '120px'\n      },\n      bidi: this.summary,\n      placeholder: app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.summary.placeholder')\n    }), m(\"small\", null, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.summary.helper_text'))), 30);\n    const fofUploadEnabled = this.canUseFoFUpload();\n    items.add('image', m(\"div\", {\n      className: \"Form-group VadkuzBlog-ArticleImage\"\n    }, m(\"label\", null, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.image.title'), \":\"), m(\"div\", {\n      \"data-upload-enabled\": fofUploadEnabled\n    }, m(\"input\", {\n      type: \"text\",\n      className: \"FormControl\",\n      bidi: this.featuredImage,\n      placeholder: \"https://\"\n    }), fofUploadEnabled ? m(Button, {\n      className: \"Button Button--icon\",\n      loading: this.fofUploadState.loading,\n      disabled: this.fofUploadState.loading,\n      onclick: () => this.openFoFUploadModal(),\n      icon: \"fas fa-cloud-upload-alt\"\n    }) : null), m(\"small\", null, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.image.helper_text')), this.featuredImage() !== '' && m(\"img\", {\n      src: this.featuredImage(),\n      alt: \"Article image\",\n      title: app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.image.title'),\n      style: {\n        width: '100%',\n        marginTop: '15px'\n      }\n    })), 30);\n    items.add('sized', m(\"div\", {\n      className: \"Form-group\"\n    }, Switch.component({\n      state: this.isSized() == true,\n      onchange: val => {\n        this.isSized(val);\n      }\n    }, [m(\"b\", null, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.highlight.title')), m(\"div\", {\n      className: \"helpText\",\n      style: {\n        fontWeight: 500\n      }\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.article_settings.fields.highlight.helper_text'))])), -10);\n    items.add('submit', m(\"div\", {\n      className: \"Form-group\"\n    }, Button.component({\n      type: 'submit',\n      className: 'Button Button--primary SupportModal-save',\n      loading: this.loading\n    }, app.translator.trans('core.forum.composer_edit.submit_button'))), -10);\n    return items;\n  }\n  submitData() {\n    return {\n      summary: this.summary(),\n      featuredImage: this.featuredImage(),\n      isFeatured: this.isFeatured(),\n      isSized: this.isSized(),\n      isPendingReview: this.isPendingReview(),\n      relationships: this.isNew && !this.attrs.isComposer ? {\n        discussion: this.attrs.article\n      } : null\n    };\n  }\n  onsubmit(e) {\n    e.preventDefault();\n\n    // Submit data\n    if (this.attrs.onsubmit) {\n      // Update attributes\n      this.meta.pushData({\n        attributes: this.submitData()\n      });\n\n      // Push\n      this.attrs.onsubmit(this.meta);\n      this.hide();\n      return;\n    }\n    this.loading = true;\n    this.meta.save(this.submitData()).then(() => {\n      if (this.attrs.article) {\n        this.attrs.article.pushData({\n          relationships: {\n            blogMeta: this.meta\n          }\n        });\n      }\n      this.hide();\n      m.redraw();\n    }, response => {\n      this.loading = false;\n      this.handleErrors(response);\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/Modals/BlogPostSettingsModal', BlogPostSettingsModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/TextEditor');","import Component from 'flarum/common/Component';\nexport default class ComposerPreview extends Component {\n  view() {\n    return m(\"div\", null);\n  }\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    s9e.TextFormatter.preview(vnode.attrs.content || '', vnode.dom);\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/Composer/ComposerPreview', ComposerPreview);","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport ComposerPreview from './ComposerPreview';\nimport app from 'flarum/forum/app';\nexport default class Composer extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.composer = this.attrs.composer;\n    this.previewContent = false;\n  }\n\n  // Render\n  view() {\n    var _this$composer, _this$composer2;\n    this.composer = this.attrs.composer;\n    const content = (_this$composer = this.composer) != null && (_this$composer = _this$composer.fields) != null && _this$composer.content ? this.composer.fields.content() : '';\n    const hasContent = content !== '';\n    const loading = !!this.attrs.disabled;\n    return m(\"div\", {\n      className: \"Flarum-Blog-Composer \".concat(loading ? 'Flarum-Blog-Composer-Loading' : '')\n    }, m(\"div\", {\n      className: 'Flarum-Blog-Composer-tabs'\n    }, m(Button, {\n      className: !this.previewContent && 'AricleComposerButtonSelected',\n      onclick: () => this.previewContent = false\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.composer.write')), m(Button, {\n      className: this.previewContent && 'AricleComposerButtonSelected',\n      onclick: () => this.previewContent = true\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.composer.view'))), m(\"div\", {\n      className: \"Composer Flarum-Blog-Composer-body \".concat(this.previewContent ? 'Flarum-Blog-Composer-HideEditor' : '')\n    }, this.previewContent && m(\"div\", {\n      className: 'Flarum-Blog-Composer-preview'\n    }, !hasContent && app.translator.trans('vadkuz-flarum2-blog.forum.composer.nothing_to_preview'), m(ComposerPreview, {\n      content: this.composer.fields.content()\n    })), TextEditor.component({\n      submitLabel: this.attrs.submitLabel || app.translator.trans('core.forum.composer_edit.submit_button'),\n      placeholder: this.attrs.placeholder,\n      disabled: loading,\n      composer: this.composer,\n      onchange: (_this$composer2 = this.composer) == null || (_this$composer2 = _this$composer2.fields) == null ? void 0 : _this$composer2.content,\n      onsubmit: this.onsubmit.bind(this),\n      value: content\n    })));\n  }\n\n  // Submit trigger\n  onsubmit() {\n    if (this.attrs.onsubmit) {\n      this.attrs.onsubmit();\n    }\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/Composer/Composer', Composer);","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Button from 'flarum/common/components/Button';\nimport Link from 'flarum/common/components/Link';\nimport BlogAuthor from '../components/BlogItemSidebar/BlogAuthor';\nimport RenameArticleModal from '../components/Modals/RenameArticleModal';\nimport BlogPostSettingsModal from '../components/Modals/BlogPostSettingsModal';\nimport Composer from '../components/Composer/Composer';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nexport default class BlogComposer extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.setTitle(app.translator.trans('vadkuz-flarum2-blog.forum.blog'));\n\n    // User cannot write blogs\n    if (!app.forum.attribute('canWriteBlogPosts')) {\n      m.route.set(app.route('blog'));\n      return;\n    }\n\n    // Send history push\n    app.history.push('blogComposer');\n\n    // Get languages (if enabled)\n    this.languages = app.store.all('discussion-languages') || [];\n\n    // Set body class\n    this.bodyClass = 'BlogItemPage BlogItemPage--composer';\n\n    // Article data\n    this.articleLanguage = Stream(m.route.param('lang') ? m.route.param('lang') : app.translator.locale);\n    this.article = app.store.createRecord('discussions');\n    this.blogMeta = null;\n    this.tags = [];\n\n    // Pre-select tags\n    if (m.route.param().tags) {\n      const tagList = Array.isArray(m.route.param().tags) ? m.route.param().tags : m.route.param().tags.split(',');\n      if (m.route.param().tags.length > 0) {\n        tagList.forEach(tagId => {\n          const foundTag = app.store.getById('tags', tagId);\n          if (foundTag) {\n            this.tags.push(foundTag);\n          }\n        });\n      }\n    }\n    this.isSaving = false;\n  }\n  openTagsModal(e) {\n    if (e === void 0) {\n      e = null;\n    }\n    if (e) {\n      e.preventDefault();\n    }\n    if (this.isSaving) return;\n    app.modal.show(() => flarum.reg.asyncModuleImport('ext:flarum/tags/forum/components/TagDiscussionModal'), {\n      selectedTags: this.tags,\n      onsubmit: tags => {\n        this.tags = tags;\n      }\n    });\n  }\n  openNameArticleModal(e) {\n    if (e === void 0) {\n      e = null;\n    }\n    if (e) {\n      e.preventDefault();\n    }\n    if (this.isSaving) return;\n    app.modal.show(RenameArticleModal, {\n      article: this.article,\n      onChange: title => {\n        this.article.pushData({\n          attributes: {\n            title\n          }\n        });\n      }\n    });\n  }\n  openBlogSettings(e) {\n    e.preventDefault();\n    if (this.isSaving) return;\n    app.modal.show(BlogPostSettingsModal, {\n      meta: this.blogMeta,\n      onsubmit: meta => this.blogMeta = meta\n    });\n  }\n  view() {\n    return m(\"div\", {\n      className: 'FlarumBlogItem'\n    }, m(\"div\", {\n      className: 'container'\n    }, this.pageItems().toArray()));\n  }\n  pageItems() {\n    const items = new ItemList();\n    items.add('toolButtons', m(\"div\", {\n      className: \"FlarumBlog-ToolButtons\"\n    }, m(Link, {\n      href: app.route('blog'),\n      className: \"Button\",\n      loading: this.isSaving,\n      icon: \"fas fa-angle-left\"\n    }, m(\"i\", {\n      class: \"icon fas fa-angle-left Button-icon\"\n    }), m(\"span\", {\n      class: \"Button-label\"\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.return_to_overview')))), 100);\n    items.add('article', m(\"div\", {\n      className: 'FlarumBlog-Article'\n    }, this.articleWrapperItems().toArray()), 90);\n    return items;\n  }\n  articleWrapperItems() {\n    const items = new ItemList();\n    items.add('container', m(\"div\", {\n      className: \"FlarumBlog-Article-Container\"\n    }, this.articleItems().toArray()), 100);\n    items.add('sidebar', m(\"div\", {\n      className: \"FlarumBlog-Article-Sidebar\"\n    }, m(BlogAuthor, {\n      user: app.session.user\n    })), 90);\n    return items;\n  }\n  articleItems() {\n    const items = new ItemList();\n    const defaultImage = app.forum.attribute('blogDefaultImage') ? \"url(\".concat(app.forum.attribute('baseUrl') + '/assets/' + app.forum.attribute('blogDefaultImage'), \")\") : null;\n    const blogImage = this.blogMeta && this.blogMeta.featuredImage() ? \"url(\".concat(this.blogMeta.featuredImage(), \")\") : defaultImage;\n    let LanguageDropdown;\n    const discussionLanguage = flarum.extensions['fof-discussion-language'];\n    if (discussionLanguage && discussionLanguage.components && discussionLanguage.components.LanguageDropdown) {\n      LanguageDropdown = discussionLanguage.components.LanguageDropdown;\n    }\n    items.add('content', m(\"div\", {\n      className: \"FlarumBlog-Article-Content\"\n    }, m(\"div\", {\n      className: \"FlarumBlog-Article-Image FlarumBlog-default-image\",\n      style: {\n        backgroundImage: blogImage,\n        cursor: 'pointer'\n      },\n      onclick: e => this.openBlogSettings(e)\n    }), m(\"div\", {\n      className: 'FlarumBlog-Article-Content-Edit-Button'\n    }, m(\"div\", {\n      className: this.languages.length === 0 ? 'FlarumBlog-Article-Content-Edit-Dropdown' : 'FlarumBlog-Article-Content-EditButtons'\n    }, this.languages !== null && this.languages.length >= 1 && m(LanguageDropdown, {\n      selected: this.articleLanguage(),\n      onclick: language => {\n        if (typeof language !== 'string') return;\n        this.articleLanguage(language);\n      }\n    }), m(Button, {\n      className: 'Button',\n      onclick: e => this.openBlogSettings(e),\n      icon: 'fas fa-pencil-alt',\n      loading: this.isSaving\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.composer.update_settings')))), m(\"div\", {\n      className: 'FlarumBlog-Article-Categories'\n    }, this.tags.map(tag => m(\"button\", {\n      class: \"Button Button--text\",\n      onclick: e => this.openTagsModal(e)\n    }, tag.name())), m(\"button\", {\n      class: \"Button Button--text\",\n      onclick: e => this.openTagsModal(e)\n    }, this.tags.length === 0 ? app.translator.trans('vadkuz-flarum2-blog.forum.composer.select_category') : app.translator.trans('vadkuz-flarum2-blog.forum.composer.edit_categories'), ' ', m(\"i\", {\n      className: 'fas fa-edit'\n    }))), m(\"div\", {\n      className: 'FlarumBlog-Article-Post'\n    }, m(\"h1\", {\n      onclick: () => this.openNameArticleModal(),\n      className: \"FlarumBlog-Article-Title\",\n      style: {\n        cursor: 'pointer'\n      }\n    }, this.article && this.article.title() && this.article.title() !== '' ? this.article.title() : app.translator.trans('vadkuz-flarum2-blog.forum.composer.no_title'), m(\"button\", {\n      class: \"Button Button--text\",\n      onclick: e => e.preventDefault()\n    }, m(\"i\", {\n      className: 'fas fa-edit'\n    }))), m(\"div\", {\n      className: \"Post-body\"\n    }, m(Composer, {\n      composer: app.composer,\n      originalContent: '',\n      submitLabel: app.translator.trans('vadkuz-flarum2-blog.forum.composer.post_article'),\n      placeholder: app.translator.trans('vadkuz-flarum2-blog.forum.composer.enter_message_here'),\n      onsubmit: () => this.create(),\n      disabled: this.isSaving\n    })))), 100);\n    items.add('commentsPlaceholder', m(\"div\", {\n      className: \"FlarumBlog-Article-Comments\"\n    }, m(\"h4\", null, app.translator.trans('vadkuz-flarum2-blog.forum.comment_section.comments'), \" (0)\"), m(\"div\", {\n      className: \"Post-body\"\n    }, m(\"blockquote\", {\n      class: \"uncited\"\n    }, m(\"div\", null, m(\"span\", {\n      className: \"fas fa-ban\",\n      style: {\n        marginRight: '5px'\n      }\n    }), ' ', app.translator.trans('vadkuz-flarum2-blog.forum.composer.comment_section'))))), 90);\n    return items;\n  }\n  create() {\n    const blogTags = (app.forum.attribute('blogTags') || []).map(tagId => parseInt(tagId, 10)).filter(tagId => Number.isInteger(tagId));\n\n    // Force tags\n    if (this.tags.length === 0) {\n      this.openTagsModal();\n      return;\n    }\n\n    // Force title\n    if (!this.article.title() || this.article.title() === '') {\n      this.openNameArticleModal();\n      return;\n    }\n\n    // Find blog tags\n    const findblogTags = this.tags.filter(tag => {\n      var _tag$id, _tag$parent, _tag$parent$id, _tag$parent2;\n      const tagId = parseInt((_tag$id = tag.id) == null ? void 0 : _tag$id.call(tag), 10);\n      const parentId = (_tag$parent = tag.parent) != null && _tag$parent.call(tag) ? parseInt((_tag$parent$id = (_tag$parent2 = tag.parent()).id) == null ? void 0 : _tag$parent$id.call(_tag$parent2), 10) : null;\n      return blogTags.includes(tagId) || parentId !== null && blogTags.includes(parentId);\n    });\n\n    // No blog tags selected\n    if (findblogTags.length === 0) {\n      alert(app.translator.trans('vadkuz-flarum2-blog.forum.composer.no_blog_tags_selected'));\n      return;\n    }\n    if ((this.blogMeta === null || !this.blogMeta.featuredImage() && !app.forum.attribute('blogDefaultImage') || !this.blogMeta.summary()) && !confirm(app.translator.trans('vadkuz-flarum2-blog.forum.composer.post_without_blog_info'))) {\n      return;\n    }\n    let relationships = {\n      tags: this.tags\n    };\n\n    // Add languages if possible\n    if (this.languages.length > 0) {\n      relationships.language = app.store.getBy('discussion-languages', 'code', this.articleLanguage());\n    }\n    const data = {\n      title: this.article.title(),\n      content: app.composer.fields.content(),\n      relationships\n    };\n    this.isSaving = true;\n    const shouldCreateBlogMeta = this.blogMeta !== null && (Boolean(this.blogMeta.featuredImage()) || Boolean(this.blogMeta.summary()) || Boolean(this.blogMeta.isSized()));\n    this.article.save(data).then(article => {\n      const syncBlogMeta = shouldCreateBlogMeta ? app.request({\n        method: 'POST',\n        url: \"\".concat(app.forum.attribute('apiUrl'), \"/blogMeta\"),\n        body: {\n          data: {\n            type: 'blogMeta',\n            attributes: {\n              featuredImage: this.blogMeta.featuredImage(),\n              summary: this.blogMeta.summary(),\n              isSized: this.blogMeta.isSized()\n            },\n            relationships: {\n              discussion: {\n                data: {\n                  type: 'discussions',\n                  id: article.id()\n                }\n              }\n            }\n          }\n        }\n      }).catch(() => null) : Promise.resolve(null);\n      return syncBlogMeta.then(() => article);\n    }).then(article => {\n      setTimeout(() => {\n        // Redirect to the article\n        m.route.set(app.route('blogArticle', {\n          id: \"\".concat(article.slug())\n        }));\n      }, 500);\n    }).catch(() => {\n      this.isSaving = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/pages/BlogComposer', BlogComposer);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LinkButton');","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default function addSidebarNav() {\n  extend(IndexSidebar.prototype, 'navItems', function (items) {\n    if (app.forum.attribute('blogAddSidebarNav') && app.forum.attribute('blogAddSidebarNav') !== '0') {\n      items.add('blog', m(LinkButton, {\n        icon: \"fas fa-comment\",\n        href: app.route('blog')\n      }, app.translator.trans('vadkuz-flarum2-blog.forum.blog')), 15);\n    }\n    return items;\n  });\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/utils/addSidebarNav', addSidebarNav);","const ruTranslations = {\n  \"vadkuz-flarum2-blog.admin.blog\": \"\",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.title\": \"  \",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.description\": \"    ,    .\",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.visit_blog\": \"  .\",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.tag_name\": \" \",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.no_tags\": \"    .\",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.save_changes\": \" \",\n  \"vadkuz-flarum2-blog.admin.select_categories_modal.close\": \"\",\n  \"vadkuz-flarum2-blog.admin.permissions.approve_posts\": \"   \",\n  \"vadkuz-flarum2-blog.admin.permissions.auto_approve_posts\": \"   \",\n  \"vadkuz-flarum2-blog.admin.permissions.write_articles\": \"    \",\n  \"vadkuz-flarum2-blog.admin.settings.add_hero_label\": \"  \",\n  \"vadkuz-flarum2-blog.admin.settings.add_hero_text\": \"     ,     .\",\n  \"vadkuz-flarum2-blog.admin.settings.add_sidebar_nav_label\": \"   \",\n  \"vadkuz-flarum2-blog.admin.settings.add_sidebar_nav_text\": \"       .\",\n  \"vadkuz-flarum2-blog.admin.settings.allow_comments_label\": \" \",\n  \"vadkuz-flarum2-blog.admin.settings.allow_comments_text\": \"      .         . :          .\",\n  \"vadkuz-flarum2-blog.admin.settings.blog_heading\": \"\",\n  \"vadkuz-flarum2-blog.admin.settings.categories_heading\": \"\",\n  \"vadkuz-flarum2-blog.admin.settings.default_article_image_label\": \"   \",\n  \"vadkuz-flarum2-blog.admin.settings.default_article_image_text\": \"   ,   ,      .\",\n  \"vadkuz-flarum2-blog.admin.settings.featured_count_label\": \".   \",\n  \"vadkuz-flarum2-blog.admin.settings.featured_count_text\": \"         ?\",\n  \"vadkuz-flarum2-blog.admin.settings.hide_on_discussion_list_label\": \"    \",\n  \"vadkuz-flarum2-blog.admin.settings.hide_on_discussion_list_text\": \"     .\",\n  \"vadkuz-flarum2-blog.admin.settings.hide_tags_in_taglist_label\": \"    \",\n  \"vadkuz-flarum2-blog.admin.settings.hide_tags_in_taglist_text\": \" ,        .\",\n  \"vadkuz-flarum2-blog.admin.settings.no_categories_selected\": \"  \",\n  \"vadkuz-flarum2-blog.admin.settings.redirect_articles_label\": \"  \",\n  \"vadkuz-flarum2-blog.admin.settings.redirect_articles_text\": \" ,     URL   URL   .\",\n  \"vadkuz-flarum2-blog.admin.settings.redirect_tags_label\": \"  \",\n  \"vadkuz-flarum2-blog.admin.settings.redirect_tags_text\": \" ,   URL    URL  .\",\n  \"vadkuz-flarum2-blog.admin.settings.redirects_heading\": \"\",\n  \"vadkuz-flarum2-blog.admin.settings.require_review_label\": \"   \",\n  \"vadkuz-flarum2-blog.admin.settings.require_review_text\": \"           .\",\n  \"vadkuz-flarum2-blog.admin.settings.select_categories_button\": \"  \",\n  \"vadkuz-flarum2-blog.admin.settings.selected_category_count\": \"{count, plural, one { # } few { # } many { # } other { # }}\",\n  \"vadkuz-flarum2-blog.admin.settings.show_tag_hierarchy_label\": \"  \",\n  \"vadkuz-flarum2-blog.admin.settings.show_tag_hierarchy_text\": \"        .\",\n  \"vadkuz-flarum2-blog.forum.article.slug\": \"\",\n  \"vadkuz-flarum2-blog.forum.article.summary\": \" \",\n  \"vadkuz-flarum2-blog.forum.article.title\": \"\",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.highlight.helper_text\": \"         .\",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.highlight.title\": \" \",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.image.helper_text\": \"   : 1200x630\",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.image.title\": \" \",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.image.upload_unavailable\": \"FoF Upload ,       .\",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.summary.helper_text\": \"          SEO.\",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.summary.placeholder\": \"  \",\n  \"vadkuz-flarum2-blog.forum.article_settings.fields.summary.title\": \"  \",\n  \"vadkuz-flarum2-blog.forum.article_settings.title\": \"  \",\n  \"vadkuz-flarum2-blog.forum.blog\": \"\",\n  \"vadkuz-flarum2-blog.forum.categories\": \"\",\n  \"vadkuz-flarum2-blog.forum.category_empty\": \"     .\",\n  \"vadkuz-flarum2-blog.forum.comment_section.comments\": \"\",\n  \"vadkuz-flarum2-blog.forum.comment_section.locked\": \"     \",\n  \"vadkuz-flarum2-blog.forum.compose.write_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.composer.comment_section\": \"     .\",\n  \"vadkuz-flarum2-blog.forum.composer.edit_categories\": \" \",\n  \"vadkuz-flarum2-blog.forum.composer.enter_message_here\": \" \",\n  \"vadkuz-flarum2-blog.forum.composer.no_blog_tags_selected\": \"    -. ,    .\",\n  \"vadkuz-flarum2-blog.forum.composer.no_title\": \" \",\n  \"vadkuz-flarum2-blog.forum.composer.nothing_to_preview\": \"   \",\n  \"vadkuz-flarum2-blog.forum.composer.post_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.composer.post_without_blog_info\": \" ,     ?        .\",\n  \"vadkuz-flarum2-blog.forum.composer.select_category\": \" \",\n  \"vadkuz-flarum2-blog.forum.composer.update_settings\": \"  \",\n  \"vadkuz-flarum2-blog.forum.composer.view\": \"\",\n  \"vadkuz-flarum2-blog.forum.composer.write\": \"\",\n  \"vadkuz-flarum2-blog.forum.forum_nav\": \" \",\n  \"vadkuz-flarum2-blog.forum.hidden\": \"\",\n  \"vadkuz-flarum2-blog.forum.no_more_posts\": \"    .\",\n  \"vadkuz-flarum2-blog.forum.read_more\": \" \",\n  \"vadkuz-flarum2-blog.forum.recent_posts\": \"  \",\n  \"vadkuz-flarum2-blog.forum.return_to_overview\": \"   \",\n  \"vadkuz-flarum2-blog.forum.review_article.approve_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.review_article.approve_article_approved\": \"   \",\n  \"vadkuz-flarum2-blog.forum.review_article.pending_review\": \"       \",\n  \"vadkuz-flarum2-blog.forum.review_article.pending_review_title\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.approve_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.article_settings\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.delete_forever\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.disable_comments\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.edit_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.enable_comments\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.hide_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.manage\": \"\",\n  \"vadkuz-flarum2-blog.forum.tools.recover_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.rename_article\": \" \",\n  \"vadkuz-flarum2-blog.forum.tools.update_category\": \" \",\n  \"vadkuz-flarum2-blog.forum.utils.redirect.link\": \"<a> </a>,    \",\n  \"vadkuz-flarum2-blog.forum.utils.redirect.title\": \"    ...\",\n  \"vadkuz-flarum2-blog.forum.placeholders.ghost_title\": \" \",\n  \"vadkuz-flarum2-blog.forum.placeholders.ghost_category\": \"\",\n  \"vadkuz-flarum2-blog.forum.validation.missing_id\": \" ID\"\n};\nexport default function applyRuTranslations(app) {\n  var _app$data, _app$translator, _app$translator$getLo;\n  const locale = String((app == null || (_app$data = app.data) == null ? void 0 : _app$data.locale) || (app == null || (_app$translator = app.translator) == null || (_app$translator$getLo = _app$translator.getLocale) == null ? void 0 : _app$translator$getLo.call(_app$translator)) || '').toLowerCase();\n  if (locale === 'ru' || locale.startsWith('ru-')) {\n    app.translator.addTranslations(ruTranslations);\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'common/translations/ru', applyRuTranslations);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/CommentPost');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/states/PostStreamState');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/DiscussionControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Dropdown');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/extractText');","import Component from 'flarum/common/Component';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport BlogPostSettingsModal from './Modals/BlogPostSettingsModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport RenameArticleModal from './Modals/RenameArticleModal';\nimport app from 'flarum/forum/app';\nexport default class BlogPostController extends Component {\n  init() {\n    this.loadedPost = false;\n  }\n  openSeoModal(article, MetaSeoModal) {\n    var _article$blogMeta;\n    const showModal = blogMetaId => app.modal.show(MetaSeoModal, {\n      objectType: 'blogs',\n      objectId: blogMetaId\n    });\n    const existingMeta = (_article$blogMeta = article.blogMeta) == null ? void 0 : _article$blogMeta.call(article);\n    if (existingMeta) {\n      showModal(existingMeta.id());\n      return;\n    }\n    app.request({\n      method: 'GET',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/blogMetaByDiscussion/\").concat(article.id())\n    }).then(response => {\n      var _response$data;\n      const blogMetaId = response == null || (_response$data = response.data) == null ? void 0 : _response$data.id;\n      if (!blogMetaId) {\n        app.alerts.show(Alert, {\n          type: 'error'\n        }, app.translator.trans('core.lib.error.generic_message'));\n        return;\n      }\n      showModal(blogMetaId);\n    }).catch(() => {\n      app.alerts.show(Alert, {\n        type: 'error'\n      }, app.translator.trans('core.lib.error.generic_message'));\n    });\n  }\n  manageArticleButtons() {\n    const article = this.attrs.article;\n    const items = new ItemList();\n\n    // Working for GlowingBlue version\n    const LanguageDiscussionModal = flarum.extensions['fof-discussion-language'] && typeof flarum.extensions['fof-discussion-language'].components !== 'undefined' ? flarum.extensions['fof-discussion-language'].components.LanguageDiscussionModal : null;\n\n    // Rename article\n    if (article.canRename()) {\n      items.add('rename', Button.component({\n        className: 'Button',\n        onclick: () => app.modal.show(RenameArticleModal, {\n          article\n        }),\n        icon: 'fas fa-pencil-alt'\n      }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.rename_article')), 100);\n    }\n    const articlePost = article.firstPost();\n\n    // Edit article\n    items.add('edit', Button.component({\n      className: 'Button',\n      disabled: !articlePost || !articlePost.canEdit(),\n      onclick: () => {\n        app.composer.load(() => flarum.reg.asyncModuleImport('flarum/forum/components/EditPostComposer'), {\n          post: articlePost\n        }).then(() => app.composer.show());\n      },\n      icon: 'fas fa-edit'\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.edit_article')), 90);\n\n    // Article settings\n    items.add('articleSettings', Button.component({\n      className: 'Button',\n      onclick: () => app.modal.show(BlogPostSettingsModal, {\n        article\n      }),\n      icon: 'fas fa-cogs'\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.article_settings')), 80);\n\n    // Update categories\n    if (article.canTag()) {\n      items.add('tag', Button.component({\n        className: 'Button',\n        onclick: () => app.modal.show(() => flarum.reg.asyncModuleImport('ext:flarum/tags/forum/components/TagDiscussionModal'), {\n          discussion: article\n        }),\n        icon: 'fas fa-tag'\n      }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.update_category')), 70);\n    }\n\n    // Update article SEO\n    const seoExt = flarum.extensions['vadkuz-flarum2-seo'];\n    const MetaSeoModal = seoExt && seoExt.components ? seoExt.components.MetaSeoModal : null;\n    if (MetaSeoModal && app.forum.attribute('canConfigureSeo')) {\n      items.add('seo', Button.component({\n        className: 'Button',\n        onclick: () => this.openSeoModal(article, MetaSeoModal),\n        icon: 'fas fa-search'\n      }, app.translator.trans('vadkuz-flarum2-seo.forum.controls.configure_seo')), 70);\n    }\n\n    // Approve article\n    if (article.blogMeta() && article.blogMeta().isPendingReview()) {\n      items.add('separator1', m(\"li\", {\n        className: \"Dropdown-separator\"\n      }), 65);\n      items.add('approve', Button.component({\n        className: 'Button',\n        disabled: !app.forum.attribute('canApproveBlogPosts'),\n        onclick: () => {\n          article.blogMeta().save({\n            isPendingReview: false\n          }).then(() => {\n            app.alerts.show(Alert, {\n              type: 'success'\n            }, app.translator.trans('vadkuz-flarum2-blog.forum.review_article.approve_article_approved'));\n          }, response => {\n            this.loading = false;\n            this.handleErrors(response);\n          });\n        },\n        icon: 'fas fa-thumbs-up'\n      }, app.translator.trans('vadkuz-flarum2-blog.forum.review_article.approve_article')), 60);\n    }\n\n    // Language\n    if (article.canChangeLanguage && article.canChangeLanguage() && LanguageDiscussionModal) {\n      items.add('lang', Button.component({\n        icon: 'fas fa-globe',\n        onclick: () => app.modal.show(LanguageDiscussionModal, {\n          discussion: article\n        })\n      }, app.translator.trans('fof-discussion-language.forum.discussion_controls.change_language_button')), 50);\n    }\n    items.add('separator2', m(\"li\", {\n      className: \"Dropdown-separator\"\n    }), 40);\n\n    // Lock article\n    if (article.canLock()) {\n      items.add('lock', Button.component({\n        className: 'Button',\n        onclick: DiscussionControls.lockAction.bind(article),\n        icon: \"fas \".concat(article.isLocked() ? 'fa-comments' : 'fa-comment-slash')\n      }, article.isLocked() ? app.translator.trans('vadkuz-flarum2-blog.forum.tools.enable_comments') : app.translator.trans('vadkuz-flarum2-blog.forum.tools.disable_comments')), 30);\n    }\n\n    // Hide/show/delete\n    if (article.canHide()) {\n      // Article is hidden\n      if (article.isHidden()) {\n        // Recover article\n        items.add('recover', Button.component({\n          className: 'Button',\n          onclick: DiscussionControls.restoreAction.bind(article),\n          icon: 'fas fa-eye'\n        }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.recover_article')), 20);\n\n        // Delete article\n        if (article.canDelete()) {\n          items.add('delete', Button.component({\n            className: 'Button',\n            onclick: () => {\n              // Confirm deletion\n              if (confirm(extractText(app.translator.trans('core.forum.discussion_controls.delete_confirmation')))) {\n                // Redirect if the current page is an blog article\n                if (app.history.getCurrent().name === 'blogArticle') {\n                  if (app.previous) {\n                    app.history.back();\n                  } else {\n                    m.route.set(app.route('blog'));\n                  }\n                }\n                return article.delete().then(() => {\n                  m.redraw();\n                });\n              }\n            },\n            icon: 'far fa-trash-alt'\n          }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.delete_forever')), 10);\n        }\n      } else {\n        // Hide article\n        items.add('hide', Button.component({\n          className: 'Button',\n          onclick: DiscussionControls.hideAction.bind(article),\n          icon: 'fas fa-eye-slash'\n        }, app.translator.trans('vadkuz-flarum2-blog.forum.tools.hide_article')), 0);\n      }\n    }\n    return items;\n  }\n  view() {\n    const article = this.attrs.article;\n    const articlePost = article.firstPost();\n    return m(\"div\", {\n      className: 'FlarumBlog-Article-Content-Edit-Button'\n    }, m(\"div\", {\n      className: 'FlarumBlog-Article-Content-Edit-Dropdown'\n    }, Dropdown.component({\n      icon: 'fas fa-cog',\n      label: app.translator.trans('vadkuz-flarum2-blog.forum.tools.manage'),\n      buttonClassName: 'Button',\n      menuClassName: 'Dropdown-menu--right',\n      onshow: () => {\n        // Get post data to make sure they can edit the post\n        if (articlePost && !articlePost.canEdit() && !this.loadedPost) {\n          this.loadedPost = true;\n          m.redraw();\n        }\n      }\n    }, this.manageArticleButtons().toArray())));\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/BlogPostController', BlogPostController);","import Component from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport BlogAuthor from './BlogAuthor';\nimport BlogCategories from '../BlogCategories';\nimport ForumNav from '../ForumNav';\nexport default class BlogItemSidebar extends Component {\n  view() {\n    return m(\"div\", {\n      className: 'FlarumBlog-Article-Sidebar'\n    }, m(\"ul\", null, listItems(this.items().toArray())));\n  }\n  items() {\n    const itemlist = new ItemList();\n    itemlist.add('author', BlogAuthor.component(this.attrs), 0);\n    itemlist.add('categories', BlogCategories.component(this.attrs), 0);\n    itemlist.add('nav', ForumNav.component(this.attrs), 0);\n    return itemlist;\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/BlogItemSidebar/BlogItemSidebar', BlogItemSidebar);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/fullTime');","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport extractText from 'flarum/common/utils/extractText';\nimport Tooltip from 'flarum/common/components/Tooltip';\nexport default class ArticleSubscription extends Component {\n  view() {\n    const currentSubscriptionState = this.attrs.discussion.subscription();\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences['notify_newPost_email'];\n    const notifyTooltip = extractText(app.translator.trans(notifyEmail ? 'flarum-subscriptions.forum.sub_controls.notify_email_tooltip' : 'flarum-subscriptions.forum.sub_controls.notify_alert_tooltip'));\n    let title = app.translator.trans('flarum-subscriptions.forum.sub_controls.not_following_button');\n    let icon = 'far fa-star';\n\n    // Following\n    if (currentSubscriptionState === 'follow') {\n      title = app.translator.trans('flarum-subscriptions.forum.sub_controls.following_button');\n      icon = 'fas fa-star';\n    }\n    return m(Tooltip, {\n      text: notifyTooltip,\n      position: \"bottom\"\n    }, m(Button, {\n      className: \"Button BlogArticleSubscription SubscriptionMenu-button--\".concat(currentSubscriptionState),\n      icon: icon,\n      onclick: this.saveSubscription.bind(this, this.attrs.discussion, ['follow', 'ignore'].indexOf(currentSubscriptionState) !== -1 ? null : 'follow')\n    }, title));\n  }\n  saveSubscription(discussion, subscription) {\n    discussion.save({\n      subscription\n    });\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/components/ArticleSubscription', ArticleSubscription);","import Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PostStreamState from 'flarum/forum/states/PostStreamState';\nimport BlogPostController from '../components/BlogPostController';\nimport BlogItemSidebar from '../components/BlogItemSidebar/BlogItemSidebar';\nimport Link from 'flarum/common/components/Link';\nimport BlogOverview from './BlogOverview';\nimport fullTime from 'flarum/common/helpers/fullTime';\nimport ArticleSubscription from '../components/ArticleSubscription';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Icon from 'flarum/common/components/Icon';\nimport app from 'flarum/forum/app';\nexport default class BlogItem extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.setTitle(app.translator.trans('vadkuz-flarum2-blog.forum.blog'));\n\n    // Send history push\n    app.history.push('blogArticle');\n    this.bodyClass = 'BlogItemPage';\n    this.near = m.route.param('near') || 0;\n    this.loading = true;\n    this.found = false;\n    this.article = null;\n    this.PostStream = null;\n    this.loadPostStreamComponent();\n    this.loadBlogItem();\n  }\n  loadPostStreamComponent() {\n    flarum.reg.asyncModuleImport('flarum/forum/components/PostStream').then(module => {\n      this.PostStream = module.default;\n      m.redraw();\n    });\n  }\n\n  // Load blog overview\n  loadBlogItem() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      app.store.find('discussions', m.route.param('id').split('-')[0]).then(this.show.bind(this)).catch(() => {\n        m.redraw();\n      });\n    }\n    m.redraw();\n  }\n\n  // Show blog post\n  show(article) {\n    // Set article data\n    this.article = article;\n\n    // Update title\n    app.setTitle(\"\".concat(article.title(), \" - \").concat(app.translator.trans('vadkuz-flarum2-blog.forum.blog')));\n    this.loading = false;\n    let includedPosts = [];\n    if (article.payload && article.payload.included) {\n      const articleId = article.id();\n      includedPosts = article.payload.included.filter(record => record.type === 'posts' && record.relationships && record.relationships.discussion && record.relationships.discussion.data.id === articleId).map(record => app.store.getById('posts', record.id)).sort((a, b) => a.id() - b.id()).slice(0, 20);\n    }\n    this.stream = new PostStreamState(article, includedPosts);\n\n    // Scroll to specific post\n    if (this.near) {\n      this.stream.goToNumber(this.near || 0, true).then(() => {\n        app.current.set('discussion', article);\n        app.current.set('stream', this.stream);\n      });\n    }\n\n    // Read post on load\n    if (app.session.user && !article.lastReadPostNumber()) {\n      article.save({\n        lastReadPostNumber: 1\n      });\n    }\n    m.redraw();\n  }\n  postItems() {\n    var _this$article2, _this$article2$title, _this$article3, _this$article3$isHidd;\n    let articlePost = null;\n    if (!this.loading && this.article) {\n      var _this$article, _this$article$firstPo;\n      articlePost = (_this$article = this.article) == null || (_this$article$firstPo = _this$article.firstPost) == null ? void 0 : _this$article$firstPo.call(_this$article);\n    }\n    const items = new ItemList();\n    items.add('title', m(\"h1\", {\n      className: classList('FlarumBlog-Article-Title', {\n        'FlarumBlog-Article-GhostTitle': this.loading\n      })\n    }, (this == null || (_this$article2 = this.article) == null || (_this$article2$title = _this$article2.title) == null ? void 0 : _this$article2$title.call(_this$article2)) || app.translator.trans('vadkuz-flarum2-blog.forum.placeholders.ghost_title'), ((_this$article3 = this.article) == null || (_this$article3$isHidd = _this$article3.isHidden) == null ? void 0 : _this$article3$isHidd.call(_this$article3)) && \"(\".concat(app.translator.trans('vadkuz-flarum2-blog.forum.hidden'), \")\")), 100);\n    items.add('publishDate', m(\"div\", {\n      className: classList('FlarumBlog-Article-PublishDate', {\n        'FlarumBlog-Article-GhostPublishDate': this.loading\n      })\n    }, this.article ? fullTime(this.article.createdAt()) : m(\"span\", null, \"\\xA0\")), 80);\n    if (this.loading) {\n      items.add('skeleton', [0, 1, 2].map(() => m(\"div\", null, m(\"p\", {\n        className: 'FlarumBlog-Article-GhostParagraph'\n      }, \"\\xA0\"), m(\"p\", {\n        className: 'FlarumBlog-Article-GhostParagraph'\n      }, \"\\xA0\"), m(\"p\", {\n        className: 'FlarumBlog-Article-GhostParagraph'\n      }, \"\\xA0\"), m(\"p\", null, \"\\xA0\"))), 60);\n    }\n    if (!this.loading) {\n      var _this$article$blogMet, _this$article4, _this$article$blogMet2;\n      if ((_this$article$blogMet = (_this$article4 = this.article).blogMeta) != null && (_this$article$blogMet = _this$article$blogMet.call(_this$article4)) != null && (_this$article$blogMet2 = _this$article$blogMet.isPendingReview) != null && _this$article$blogMet2.call(_this$article$blogMet)) {\n        items.add('review', m(\"div\", {\n          className: 'Post-body'\n        }, m(\"blockquote\", {\n          class: \"uncited\",\n          style: {\n            fontSize: '16px'\n          }\n        }, m(\"div\", null, m(Icon, {\n          name: \"far fa-clock\",\n          style: {\n            marginRight: '5px'\n          }\n        }), ' ', app.translator.trans('vadkuz-flarum2-blog.forum.review_article.pending_review')))), 60);\n      }\n      if (articlePost) {\n        items.add('post', m(CommentPost, {\n          post: articlePost\n        }), 40);\n      }\n    }\n    return items;\n  }\n  contentItems() {\n    var _this$article5, _this$article5$featur, _this$article6, _this$article6$isHidd, _app$session$user, _app$session$user$can, _this$article7, _this$article7$canRen, _this$article8, _this$article8$posts, _this$article8$posts$, _this$article9, _this$article9$tags;\n    const defaultImage = app.forum.attribute('blogDefaultImage') ? \"url(\".concat(app.forum.attribute('baseUrl'), \"/assets/\").concat(app.forum.attribute('blogDefaultImage'), \")\") : null;\n    const blogImage = (_this$article5 = this.article) != null && (_this$article5 = _this$article5.blogMeta()) != null && (_this$article5$featur = _this$article5.featuredImage) != null && _this$article5$featur.call(_this$article5) ? \"url(\".concat(this.article.blogMeta().featuredImage(), \")\") : defaultImage;\n    const items = new ItemList();\n    items.add('image', m(\"div\", {\n      className: classList('FlarumBlog-Article-Image FlarumBlog-default-image', {\n        'FlarumBlog-Article-GhostImage': this.loading\n      }),\n      style: {\n        backgroundImage: blogImage,\n        opacity: (_this$article6 = this.article) != null && (_this$article6$isHidd = _this$article6.isHidden) != null && _this$article6$isHidd.call(_this$article6) ? 0.4 : null\n      }\n    }), 100);\n    if (this.article && ((_app$session$user = app.session.user) != null && (_app$session$user$can = _app$session$user.canEdit) != null && _app$session$user$can.call(_app$session$user) || (_this$article7 = this.article) != null && (_this$article7$canRen = _this$article7.canRename) != null && _this$article7$canRen.call(_this$article7) || (_this$article8 = this.article) != null && (_this$article8$posts = _this$article8.posts) != null && (_this$article8$posts = _this$article8$posts.call(_this$article8)) != null && (_this$article8$posts = _this$article8$posts[0]) != null && (_this$article8$posts$ = _this$article8$posts.canEdit) != null && _this$article8$posts$.call(_this$article8$posts))) {\n      items.add('editArticle', m(BlogPostController, {\n        article: this.article\n      }), 80);\n    }\n\n    // Article Categories\n    items.add('categories', m(\"div\", {\n      className: \"FlarumBlog-Article-Categories\"\n    }, !this.loading && ((_this$article9 = this.article) == null || (_this$article9$tags = _this$article9.tags) == null || (_this$article9$tags = _this$article9$tags.call(_this$article9)) == null ? void 0 : _this$article9$tags.map(tag => m(Link, {\n      href: app.route('blogCategory', {\n        slug: tag.slug()\n      })\n    }, tag.name()))), this.loading && [0, 1].map(() => m(\"span\", {\n      className: \"FlarumBlog-Article-GhostCategory\"\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.placeholders.ghost_category')))), 60);\n    items.add('post', m(\"div\", {\n      className: 'FlarumBlog-Article-Post'\n    }, this.postItems().toArray()), 40);\n    return items;\n  }\n  articleItems() {\n    var _this$article0, _this$article0$isLock, _this$article1, _this$article1$commen;\n    const items = new ItemList();\n    items.add('content', m(\"div\", {\n      className: \"FlarumBlog-Article-Content\"\n    }, this.contentItems().toArray()), 100);\n    if (!(this != null && (_this$article0 = this.article) != null && (_this$article0$isLock = _this$article0.isLocked) != null && _this$article0$isLock.call(_this$article0) && (this == null || (_this$article1 = this.article) == null || (_this$article1$commen = _this$article1.commentCount) == null ? void 0 : _this$article1$commen.call(_this$article1)) === 1)) {\n      var _this$article10, _this$article10$isLoc;\n      items.add('comments', m(\"div\", {\n        className: 'FlarumBlog-Article-Comments'\n      }, !this.loading && app.session.user && this.article.subscription && (!this.article.isLocked || this.article.isLocked && !this.article.isLocked()) && m(ArticleSubscription, {\n        discussion: this.article\n      }), m(\"h4\", null, app.translator.trans('vadkuz-flarum2-blog.forum.comment_section.comments'), \" (\", this.article ? this.article.commentCount() - 1 : 0, \")\"), !this.loading && ((_this$article10 = this.article) == null || (_this$article10$isLoc = _this$article10.isLocked) == null ? void 0 : _this$article10$isLoc.call(_this$article10)) && m(\"div\", {\n        className: 'Post-body'\n      }, m(\"blockquote\", {\n        class: \"uncited\"\n      }, m(\"div\", null, m(\"span\", {\n        className: 'far fa-lock',\n        style: {\n          marginRight: '5px'\n        }\n      }), ' ', app.translator.trans('vadkuz-flarum2-blog.forum.comment_section.locked')))), !this.loading && this.article && this.PostStream && m(this.PostStream, {\n        discussion: this.article,\n        stream: this.stream,\n        onPositionChange: this.positionChanged.bind(this)\n      })), 75);\n    }\n    return items;\n  }\n  view() {\n    return [app.forum.attribute('blogAddHero') == true && IndexPage.prototype.hero(), m(\"div\", {\n      className: 'FlarumBlogItem'\n    }, m(\"div\", {\n      className: 'container'\n    }, m(\"div\", {\n      className: 'FlarumBlog-ToolButtons'\n    }, m(Link, {\n      href: app.route('blog'),\n      className: 'Button',\n      onclick: e => {\n        if (app.previous.matches(BlogOverview)) {\n          e.preventDefault();\n          history.back();\n        }\n      }\n    }, m(\"i\", {\n      class: \"icon fas fa-angle-left Button-icon\"\n    }), m(\"span\", {\n      class: \"Button-label\"\n    }, app.translator.trans('vadkuz-flarum2-blog.forum.return_to_overview')))), m(\"div\", {\n      className: 'FlarumBlog-Article'\n    }, m(\"div\", {\n      className: 'FlarumBlog-Article-Container'\n    }, this.articleItems().toArray()), m(BlogItemSidebar, {\n      article: this.article,\n      loading: this.loading\n    }))))];\n  }\n  positionChanged(startNumber, endNumber) {\n    const article = this.article;\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\n      article.save({\n        lastReadPostNumber: endNumber\n      });\n      m.redraw();\n    }\n  }\n}\nflarum.reg.add('vadkuz-flarum2-blog', 'forum/pages/BlogItem', BlogItem);","import app from 'flarum/forum/app';\nimport Model from 'flarum/common/Model';\nimport Tag from 'ext:flarum/tags/common/models/Tag';\nimport Discussion from 'flarum/common/models/Discussion';\nimport BlogOverview from './pages/BlogOverview';\nimport redirector from './utils/redirector';\nimport BlogMeta from '../common/Models/BlogMeta';\nimport extendTagOverview from './utils/extendTagOverview';\nimport discussionRouting from './utils/discussionRouting';\nimport BlogComposer from './pages/BlogComposer';\nimport addSidebarNav from './utils/addSidebarNav';\nimport applyRuTranslations from '../common/translations/ru';\nimport BlogItem from './pages/BlogItem';\n\n// Register Flarum Blog\napp.initializers.add('vadkuz-flarum2-blog', app => {\n  applyRuTranslations(app);\n  app.routes.blog = {\n    path: '/blog',\n    component: BlogOverview\n  };\n  app.routes.blogCategory = {\n    path: '/blog/category/:slug',\n    component: BlogOverview\n  };\n  app.routes.blogComposer = {\n    path: '/blog/compose',\n    component: BlogComposer\n  };\n  app.routes.blogArticle = {\n    path: '/blog/:id',\n    component: BlogItem\n  };\n  app.routes['blogArticle.near'] = {\n    path: '/blog/:id/:near',\n    component: BlogItem\n  };\n  app.store.models.blogMeta = BlogMeta;\n  Discussion.prototype.blogMeta = Model.hasOne('blogMeta');\n  Tag.prototype.isBlog = Model.attribute('isBlog');\n\n  // Redirect discussions/tags to their blog post/overview\n  redirector();\n\n  // Extend tag overview.\n  // Hide tags which are used as blog category\n  extendTagOverview();\n\n  // Make that blog articles have a blog route and not a discussion route\n  discussionRouting();\n\n  // Add a link to the blog to the IndexPage sidebar, if enabled.\n  addSidebarNav();\n}, -100000);\n\n// Flarum 2.x: compat API has been removed.","import IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport { extend, override } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nexport default function () {\n  const isBlogTag = (tag, blogTags) => {\n    var _tag$id, _tag$parent, _tag$parent$id, _tag$parent2;\n    if (!tag || !Array.isArray(blogTags) || blogTags.length === 0) {\n      return false;\n    }\n    const tagId = parseInt((_tag$id = tag.id) == null ? void 0 : _tag$id.call(tag), 10);\n    const parentId = (_tag$parent = tag.parent) != null && _tag$parent.call(tag) ? parseInt((_tag$parent$id = (_tag$parent2 = tag.parent()).id) == null ? void 0 : _tag$parent$id.call(_tag$parent2), 10) : null;\n    return blogTags.includes(tagId) || parentId !== null && blogTags.includes(parentId);\n  };\n\n  // Redirect tag to blog category\n  extend(IndexPage.prototype, 'oncreate', function () {\n    const tag = typeof app.currentTag === 'function' ? app.currentTag() : null;\n    const tagRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'tags_only';\n\n    // Only trigger when it's a tag page and the redirects are enabled\n    if (tag && tagRedirectEnabled) {\n      const blogTags = app.forum.attribute('blogTags') || [];\n\n      // Tag is inside list\n      if (isBlogTag(tag, blogTags)) {\n        m.route.set(app.route('blogCategory', {\n          slug: tag.slug()\n        }));\n      }\n    }\n  });\n\n  // Redirect discussion to blog article\n  override(DiscussionPage.prototype, 'show', function (original, discussion) {\n    const discussionRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'discussions_only';\n    if (discussionRedirectEnabled && discussion && discussion.tags().length > 0) {\n      const blogTags = app.forum.attribute('blogTags') || [];\n      const foundTags = discussion.tags().filter(tag => {\n        return isBlogTag(tag, blogTags);\n      });\n\n      // Only redirect if the discussion has blog tags\n      if (foundTags.length > 0) {\n        // Redirect to blog article\n        const url = app.route('blogArticle', {\n          id: discussion.slug()\n        });\n        m.route.set(url, null, {\n          replace: true\n        });\n        return null;\n      }\n    }\n    return original(discussion);\n  });\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","BlogCategories","oninit","vnode","super","this","blogCategories","app","forum","attribute","view","m","className","translator","trans","map","tagId","tag","store","getById","tags","showSubTags","length","slug","route","param","all","forEach","_tag","isChild","parent","push","categoryItem","href","concat","id","icon","style","backgroundColor","color","name","add","ForumNav","buttonClassName","navItems","toArray","BlogOverviewItem","titleItems","_article$blogMeta","_article$blogMeta$isP","_article$blogMeta2","_article$blogMeta2$is","article","attrs","items","title","blogMeta","isPendingReview","isHidden","text","dataItems","_article$user","_article$user$display","class","createdAt","user","displayName","commentCount","contentItems","_article$blogMeta3","_article$blogMeta3$su","summary","getImage","_article$blogMeta4","_article$blogMeta4$fe","defaultImage","featuredImage","_article$blogMeta5","_article$blogMeta5$is","blogImage","isSized","backgroundImage","FeaturedBlogItem","topItems","_article$tags","_article$isSticky","isSticky","position","_article$blogMeta3$fe","BlogOverview","bodyClass","isLoading","featuredPosts","posts","hasMore","isLoadingMore","languages","currentSelectedLanguage","formatter","locale","loadBlogOverview","featuredCount","parseInt","showCategories","showForumNav","preloadBlogOverview","setTimeout","show","bind","reloadData","redraw","filter","blog","language","find","sort","then","catch","articles","payload","links","next","slice","loadMore","replace","data","LanguageDropdown","discussionLanguage","extensions","components","hero","onclick","newArticle","selected","set","document","location","pathname","lang","clear","Array","fill","undefined","state","loading","currentCategory","getBy","join","BlogMeta","discussion","isFeatured","extendTagOverview","extend","markup","blogTags","tag_tiles_parent","findChild","tag_tiles","children","tile","i","indexOf","remove","childClass","recursive","maxDepth","depth","isArray","getChildren","child","_children$i","includes","subParent","subChild","original_discussion_route","near","shouldRedirect","Number","isInteger","foundTags","_tag$id","_tag$parent","_tag$parent$id","_tag$parent2","parentId","isBlogTag","lastReadPostNumber","BlogAuthor","author","username","bio","RenameArticleModal","redirect","content","onsubmit","fields","placeholder","bidi","type","submitData","e","preventDefault","onChange","hide","save","url","window","history","replaceState","response","handleErrors","BlogPostSettingsModal","meta","createRecord","isNew","exists","fofUploadState","error","FileManagerModal","uploader","canUseFoFUpload","Boolean","findUploadedFile","fileId","getUploadedFileUrl","file","_file$data","attributes","moduleDefault","default","resolveFoFUploadModules","directFileManagerModal","directUploader","Uploader","fileManagerModule","uploaderModule","Promise","asyncModuleImport","openFoFUploadModal","_this","onSelect","selectedFileIds","selectedFile","selectedFileUrl","console","maxWidth","minWidth","width","minHeight","fofUploadEnabled","disabled","src","alt","marginTop","onchange","val","fontWeight","relationships","isComposer","pushData","ComposerPreview","oncreate","s9e","TextFormatter","preview","dom","Composer","composer","previewContent","_this$composer","_this$composer2","hasContent","submitLabel","value","BlogComposer","articleLanguage","tagList","split","foundTag","isSaving","openTagsModal","selectedTags","openNameArticleModal","openBlogSettings","pageItems","articleWrapperItems","articleItems","cursor","originalContent","create","marginRight","alert","confirm","shouldCreateBlogMeta","method","body","resolve","addSidebarNav","ruTranslations","applyRuTranslations","_app$data","_app$translator","_app$translator$getLo","String","getLocale","toLowerCase","startsWith","addTranslations","BlogPostController","init","loadedPost","openSeoModal","MetaSeoModal","showModal","blogMetaId","objectType","objectId","existingMeta","_response$data","manageArticleButtons","LanguageDiscussionModal","canRename","articlePost","firstPost","canEdit","load","post","canTag","seoExt","canChangeLanguage","canLock","isLocked","canHide","canDelete","getCurrent","back","delete","label","menuClassName","onshow","BlogItemSidebar","itemlist","component","ArticleSubscription","currentSubscriptionState","subscription","notifyEmail","session","preferences","notifyTooltip","saveSubscription","BlogItem","found","PostStream","loadPostStreamComponent","loadBlogItem","includedPosts","included","articleId","record","b","stream","goToNumber","postItems","_this$article2","_this$article2$title","_this$article3","_this$article3$isHidd","_this$article","_this$article$firstPo","_this$article$blogMet","_this$article4","_this$article$blogMet2","fontSize","_this$article5","_this$article5$featur","_this$article6","_this$article6$isHidd","_app$session$user","_app$session$user$can","_this$article7","_this$article7$canRen","_this$article8","_this$article8$posts","_this$article8$posts$","_this$article9","_this$article9$tags","opacity","_this$article0","_this$article0$isLock","_this$article1","_this$article1$commen","_this$article10","_this$article10$isLoc","onPositionChange","positionChanged","matches","startNumber","endNumber","routes","path","blogCategory","blogComposer","blogArticle","models","isBlog","tagRedirectEnabled","override","original","redirector","discussionRouting"],"sourceRoot":""}